<?xml version="1.0" encoding="UTF-8"?>

<pageSetting id="xxtsgl" title="行员类别信息配置" type="manage" version="1.0.0.0" pid="" desc="标准版"> 
  <conPart> 
    <tags> 
      <tag row="0" col="0" rowspan="1" colspan="1" name="MSQL4Select" label="行员类别" fieldName=""> 
        <attribute key="sql" value="select lbdh as key, lbmc as value from csb_hylb"/>  
        <attribute key="isSearch" value="false"/>  
        <attribute key="isRequired" value="false"/>  
        <attribute key="isMultiple" value="false"/>  
        <attribute key="name" value="hylb"/>  
        <attribute key="width" value="120px;"/>  
        <attribute key="isAll" value="true"/>  
        <attribute key="isEditable" value="true"/> 
      </tag>  
      <tag row="0" col="1" rowspan="1" colspan="1" name="Dmms" label="推送方式" fieldName=""> 
        <attribute key="name" value="tsfs"/>  
        <attribute key="width" value="120px;"/>  
        <attribute key="isAll" value="true"/>  
        <attribute key="dmmc" value="tsfs"/>  
        <attribute key="multiple" value="false"/>  
        <attribute key="editable" value="true"/> 
      </tag>  
      <tag row="0" col="2" rowspan="1" colspan="1" name="Dmms" label="APP版本" fieldName=""> 
        <attribute key="name" value="appbb"/>  
        <attribute key="width" value="120px;"/>  
        <attribute key="isAll" value="true"/>  
        <attribute key="dmmc" value="mpasappbb"/>  
        <attribute key="multiple" value="false"/>  
        <attribute key="editable" value="true"/> 
      </tag> 
    </tags> 
  </conPart>  
  <table page="true" id="xxtsgltable"> 
    <col id="TSFS" title="tsfs" align="left" type="hidden" width="120" format="" frozen="false" mergeCells="false" footerCells="false" exp="" zsy="" showDymCol="true"/>  
    <col id="TSFSMS" title="推送方式" align="left" type="string" width="120" format="" frozen="false" mergeCells="false" footerCells="false" exp="" zsy="" showDymCol="true"/>  
    <col id="APPBBMS" title="APP版本" align="left" type="string" width="120" format="" frozen="false" mergeCells="false" footerCells="false" exp="" zsy="" showDymCol="true"/>  
    <col id="QZLX" title="qzlx" align="left" type="hidden" width="120" format="" frozen="false" mergeCells="false" footerCells="false" exp="" zsy=""/>  
    <col id="QZLXMS" title="取值类型" align="left" type="string" width="120" format="" frozen="false" mergeCells="false" footerCells="false" exp="" zsy="" showDymCol="true"/>  
    <col id="XSFL" title="xsfl" align="left" type="hidden" width="120" format="" frozen="false" mergeCells="false" footerCells="false" exp="" zsy=""/>  
    <col id="XSFLMS" title="显示分类" align="left" type="string" width="120" format="" frozen="false" mergeCells="false" footerCells="false" exp="" zsy="" showDymCol="true"/>  
    <col id="XSMC" title="显示名称" align="left" type="string" width="120" format="" frozen="false" mergeCells="false" footerCells="false" exp="" zsy=""/>  
    <col id="SJLY" title="sjly" align="left" type="hidden" width="100" format="" frozen="false" mergeCells="false" footerCells="false" exp="" zsy=""/>  
    <col id="SJLYMX" title="数据来源" align="left" type="string" width="250" format="" frozen="false" mergeCells="false" footerCells="false" exp="" zsy=""/>  
    <col id="LBDH" title="行员类别" align="left" type="hidden" width="200" format="" frozen="false" mergeCells="false" footerCells="false" exp="" zsy="" showDymCol="true"/>  
    <col id="LBMC" title="行员类别" align="left" type="string" width="300" format="" frozen="false" mergeCells="false" footerCells="false" exp="" zsy="" showDymCol="true"/>  
    <col id="APPBB" title="APPBB" align="center" type="hidden" width="120" format="" frozen="false" mergeCells="false" footerCells="false" exp="" zsy=""/> 
  </table>  
  <rels> 
    <items id="xxtsgltable"/> 
  </rels>  
  <addPage title="编辑页面"> 
    <tag row="0" col="0" rowspan="1" colspan="1" name="Dmms" label="推送方式" fieldName="TSFS"> 
      <attribute key="name" value="tsfs"/>  
      <attribute key="width" value="150px;"/>  
      <attribute key="isAll" value="false"/>  
      <attribute key="dmmc" value="tsfs"/>  
      <attribute key="multiple" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag>  
    <tag row="0" col="1" rowspan="1" colspan="1" name="Dmms" label="APP版本" fieldName="APPBB"> 
      <attribute key="name" value="appbb"/>  
      <attribute key="width" value="150px;"/>  
      <attribute key="isAll" value="false"/>  
      <attribute key="dmmc" value="mpasappbb"/>  
      <attribute key="multiple" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag>  
    <tag row="1" col="0" rowspan="1" colspan="1" name="Dmms" label="显示分类" fieldName="XSFL"> 
      <attribute key="name" value="xsfl"/>  
      <attribute key="width" value="150px;"/>  
      <attribute key="isAll" value="false"/>  
      <attribute key="dmmc" value="mpasxsfl"/>  
      <attribute key="multiple" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag>  
    <tag row="1" col="1" rowspan="1" colspan="1" name="Dmms" label="取值类型" fieldName="QZLX"> 
      <attribute key="name" value="qzlx"/>  
      <attribute key="width" value="150px;"/>  
      <attribute key="isAll" value="false"/>  
      <attribute key="dmmc" value="mpasqzlx"/>  
      <attribute key="multiple" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag>  
    <tag row="2" col="0" rowspan="1" colspan="2" name="HYKhzbSelect" label="数据来源" fieldName=""> 
      <attribute key="isSearch" value="false"/>  
      <attribute key="isRequired" value="false"/>  
      <attribute key="isMultiple" value="false"/>  
      <attribute key="name" value="hykhzb"/>  
      <attribute key="width" value="500px;"/>  
      <attribute key="isAll" value="false"/>  
      <attribute key="isEditable" value="true"/> 
    </tag>  
    <tag row="2" col="0" rowspan="1" colspan="2" name="JGKhzbSelect" label="" fieldName=""> 
      <attribute key="isSearch" value="false"/>  
      <attribute key="isRequired" value="false"/>  
      <attribute key="isMultiple" value="false"/>  
      <attribute key="name" value="jgkhzb"/>  
      <attribute key="width" value="500px"/>  
      <attribute key="isAll" value="false"/>  
      <attribute key="isEditable" value="true"/> 
    </tag>  
    <tag row="2" col="0" rowspan="1" colspan="2" name="Textarea" label="" fieldName=""> 
      <attribute key="cols" value="40"/>  
      <attribute key="style" value="width:500px"/>  
      <attribute key="name" value="zdysql"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/>  
      <attribute key="rows" value="5"/> 
    </tag>  
    <tag row="2" col="0" rowspan="1" colspan="2" name="MSQL4Select" label="" fieldName=""> 
      <attribute key="sql" value="select fabh as key,famc as value from khfa_fapz where khnf=$sysdate_yyyy$ and  khdx='2'"/>  
      <attribute key="isSearch" value="false"/>  
      <attribute key="isRequired" value="false"/>  
      <attribute key="isMultiple" value="false"/>  
      <attribute key="name" value="khfabh"/>  
      <attribute key="width" value="500px"/>  
      <attribute key="isAll" value="false"/>  
      <attribute key="isEditable" value="true"/> 
    </tag>  
    <tag row="3" col="0" rowspan="1" colspan="2" name="Text" label="显示名称" fieldName="XSMC"> 
      <attribute key="maxlength" value="20"/>  
      <attribute key="style" value="width:500px"/>  
      <attribute key="name" value="xsmc"/>  
      <attribute key="styleClass" value="required"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag>  
    <tag row="4" col="0" rowspan="1" colspan="2" name="Hidden" label="行员类别" fieldName="LBDH"> 
      <attribute key="name" value="lbdh"/> 
    </tag>  
    <tag row="4" col="2" rowspan="1" colspan="1" name="Hidden" label="" fieldName="SJLY"> 
      <attribute key="name" value="sjly"/> 
    </tag>  
    <tag row="5" col="0" rowspan="1" colspan="1" name="Hidden" label="" fieldName="LBMC"> 
      <attribute key="name" value="lbmc"/> 
    </tag>  
    <tag row="5" col="1" rowspan="1" colspan="1" name="DataInterface" label="null" fieldName=""> 
      <attribute key="dataType" value="select"/>  
      <attribute key="sql" value="select lbdh,lbmc from csb_hylb"/>  
      <attribute key="name" value="getHylb"/> 
    </tag> 
  </addPage>  
  <updatePage title="编辑页面"> 
    <tag row="0" col="0" rowspan="1" colspan="1" name="Dmms" label="推送方式" fieldName="TSFS"> 
      <attribute key="name" value="tsfs"/>  
      <attribute key="width" value="150px;"/>  
      <attribute key="isAll" value="false"/>  
      <attribute key="dmmc" value="tsfs"/>  
      <attribute key="multiple" value="false"/>  
      <attribute key="isEditable" value="false"/>  
      <attribute key="editable" value="false"/> 
    </tag>  
    <tag row="0" col="1" rowspan="1" colspan="1" name="Dmms" label="APP版本" fieldName="APPBB"> 
      <attribute key="name" value="appbb"/>  
      <attribute key="width" value="150px;"/>  
      <attribute key="isAll" value="false"/>  
      <attribute key="dmmc" value="mpasappbb"/>  
      <attribute key="multiple" value="false"/>  
      <attribute key="isEditable" value="false"/>  
      <attribute key="editable" value="false"/> 
    </tag>  
    <tag row="1" col="0" rowspan="1" colspan="1" name="Dmms" label="显示分类" fieldName="XSFL"> 
      <attribute key="name" value="xsfl"/>  
      <attribute key="width" value="150px;"/>  
      <attribute key="isAll" value="false"/>  
      <attribute key="dmmc" value="mpasxsfl"/>  
      <attribute key="multiple" value="false"/>  
      <attribute key="isEditable" value="false"/>  
      <attribute key="editable" value="false"/> 
    </tag>  
    <tag row="1" col="1" rowspan="1" colspan="1" name="Dmms" label="取值类型" fieldName="QZLX"> 
      <attribute key="name" value="qzlx"/>  
      <attribute key="width" value="150px;"/>  
      <attribute key="isAll" value="false"/>  
      <attribute key="dmmc" value="mpasqzlx"/>  
      <attribute key="multiple" value="false"/>  
      <attribute key="isEditable" value="false"/>  
      <attribute key="editable" value="false"/> 
    </tag>  
    <tag row="2" col="0" rowspan="1" colspan="2" name="HYKhzbSelect" label="数据来源" fieldName=""> 
      <attribute key="isSearch" value="false"/>  
      <attribute key="isRequired" value="false"/>  
      <attribute key="isMultiple" value="false"/>  
      <attribute key="name" value="hykhzb"/>  
      <attribute key="width" value="500px;"/>  
      <attribute key="isAll" value="false"/>  
      <attribute key="isEditable" value="true"/> 
    </tag>  
    <tag row="2" col="0" rowspan="1" colspan="2" name="JGKhzbSelect" label="" fieldName=""> 
      <attribute key="isSearch" value="false"/>  
      <attribute key="isRequired" value="false"/>  
      <attribute key="isMultiple" value="false"/>  
      <attribute key="name" value="jgkhzb"/>  
      <attribute key="width" value="500px"/>  
      <attribute key="isAll" value="false"/>  
      <attribute key="isEditable" value="true"/> 
    </tag>  
    <tag row="2" col="0" rowspan="1" colspan="2" name="Textarea" label="" fieldName=""> 
      <attribute key="cols" value="40"/>  
      <attribute key="style" value="width:500px"/>  
      <attribute key="name" value="zdysql"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/>  
      <attribute key="rows" value="5"/> 
    </tag>  
    <tag row="2" col="0" rowspan="1" colspan="2" name="MSQL4Select" label="" fieldName=""> 
      <attribute key="sql" value="select fabh as key,famc as value from khfa_fapz where khnf=$sysdate_yyyy$ and  khdx='2'"/>  
      <attribute key="isSearch" value="false"/>  
      <attribute key="isRequired" value="false"/>  
      <attribute key="isMultiple" value="false"/>  
      <attribute key="name" value="khfabh"/>  
      <attribute key="width" value="500px"/>  
      <attribute key="isAll" value="false"/>  
      <attribute key="isEditable" value="true"/> 
    </tag>  
    <tag row="3" col="0" rowspan="1" colspan="2" name="Text" label="显示名称" fieldName="XSMC"> 
      <attribute key="maxlength" value="20"/>  
      <attribute key="style" value="width:500px"/>  
      <attribute key="name" value="xsmc"/>  
      <attribute key="styleClass" value="required"/>  
      <attribute key="isAll" value="false"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="isEditable" value="false"/>  
      <attribute key="editable" value="false"/> 
    </tag>  
    <tag row="4" col="0" rowspan="1" colspan="2" name="Hidden" label="行员类别" fieldName="LBDH"> 
      <attribute key="name" value="lbdh"/> 
    </tag>  
    <tag row="4" col="2" rowspan="1" colspan="1" name="Hidden" label="" fieldName="SJLY"> 
      <attribute key="name" value="sjly"/> 
    </tag>  
    <tag row="5" col="0" rowspan="1" colspan="1" name="Hidden" label="" fieldName="LBMC"> 
      <attribute key="name" value="lbmc"/> 
    </tag>  
    <tag row="5" col="1" rowspan="1" colspan="1" name="DataInterface" label="null" fieldName=""> 
      <attribute key="dataType" value="select"/>  
      <attribute key="sql" value="select lbdh,lbmc from csb_hylb"/>  
      <attribute key="name" value="getHylb"/> 
    </tag> 
  </updatePage>  
  <buttons> 
    <button>add</button>  
    <button>edit</button>  
    <button>delete</button> 
  </buttons>  
  <flow> 
    <insertbefore/>  
    <insertafter/>  
    <deletebefore/>  
    <deleteafter/>  
    <updatebefore/>  
    <updateafter/> 
  </flow>  
  <sqlMap namespace="studio.xxtsgl"> 
    <select id="dn0.xxtsglList" parameterClass="java.util.Map" resultClass="java.util.HashMap" remapResults="true"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> select xx.TSFS,tsfs.dmms as tsfsms,xx.QZLX,qzlx.dmms as qzlxms,xx.XSFL, xsfl.dmms as xsflms,xx.xsmc,xx.sjly,xx.appbb,appbb.dmms as appbbms, case when xx.QZLX='1' then (select khzbmc from khfa_khzb_hy hy where rtrim(cast(hy.khzbdh as char(20)))=xx.sjly) when xx.QZLX='2' then (select khzbmc from khfa_khzb_jg jg where rtrim(cast(jg.khzbdh as char(20)))=xx.sjly) when xx.QZLX='4' then (select famc from khfa_fapz pz where rtrim(cast(pz.FABH as char(20)))=xx.sjly) else xx.sjly end sjlymx,xx.LBDH,xx.lbmc from MPAS_HYLBXXPZ xx inner join csb_dmms tsfs on tsfs.DMZ=xx.TSFS and upper(tsfs.DMMC)='TSFS' inner join csb_dmms qzlx on qzlx.dmz=xx.QZLX and upper(qzlx.dmmc)='MPASQZLX' inner join csb_dmms xsfl on xsfl.DMZ=xx.XSFL and upper(xsfl.DMMC)='MPASXSFL' inner join csb_dmms appbb on appbb.DMZ=xx.appbb and upper(appbb.DMMC)='MPASAPPBB' where 1=1 
      <isNotEmpty property="hylb">and xx.lbdh like '%$hylb$%'</isNotEmpty>  
      <isNotEmpty property="tsfs">and xx.TSFS='$tsfs$'</isNotEmpty>  
      <isNotEmpty property="appbb">and xx.appbb = '$appbb$'</isNotEmpty> 
    </select>  
    <select id="dn0.xxtsglCount" parameterClass="java.util.Map" resultClass="java.lang.Integer"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> select count(1) from ( select xx.TSFS,tsfs.dmms as tsfsms,xx.QZLX,qzlx.dmms as qzlxms,xx.XSFL, xsfl.dmms as xsflms,xx.xsmc,xx.sjly,xx.appbb,appbb.dmms as appbbms, case when xx.QZLX='1' then (select khzbmc from khfa_khzb_hy hy where rtrim(cast(hy.khzbdh as char(20)))=xx.sjly) when xx.QZLX='2' then (select khzbmc from khfa_khzb_jg jg where rtrim(cast(jg.khzbdh as char(20)))=xx.sjly) when xx.QZLX='4' then (select famc from khfa_fapz pz where rtrim(cast(pz.FABH as char(20)))=xx.sjly) else xx.sjly end sjlymx,xx.LBDH,xx.lbmc from MPAS_HYLBXXPZ xx inner join csb_dmms tsfs on tsfs.DMZ=xx.TSFS and upper(tsfs.DMMC)='TSFS' inner join csb_dmms qzlx on qzlx.dmz=xx.QZLX and upper(qzlx.dmmc)='MPASQZLX' inner join csb_dmms xsfl on xsfl.DMZ=xx.XSFL and upper(xsfl.DMMC)='MPASXSFL' inner join csb_dmms appbb on appbb.DMZ=xx.appbb and upper(appbb.DMMC)='MPASAPPBB' where 1=1 
      <isNotEmpty property="hylb">and xx.lbdh like '%$hylb$%'</isNotEmpty>  
      <isNotEmpty property="tsfs">and xx.TSFS='$tsfs$'</isNotEmpty>  
      <isNotEmpty property="appbb">and xx.appbb = '$appbb$'</isNotEmpty> ) t
    </select>  
    <select id="dn0.xxtsgl_select_by_primaryKey" parameterClass="java.util.Map" resultClass="java.util.HashMap"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> select LBMC, XSMC, LBDH, XSFL, QZLX, APPBB, TSFS, SJLY from MPAS_HYLBXXPZ where 1= 1 and XSMC = '$xsmc$' and XSFL = '$xsfl$' and QZLX = '$qzlx$' and APPBB = '$appbb$' and TSFS = '$tsfs$'
    </select>  
    <select id="dn0.xxtsgl_check_insert" parameterClass="java.util.Map" resultClass="java.util.HashMap"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> select LBMC, XSMC, LBDH, XSFL, QZLX, APPBB, TSFS, SJLY from MPAS_HYLBXXPZ where 1= 1 and XSMC = '$xsmc$' and XSFL = '$xsfl$' and QZLX = '$qzlx$' and APPBB = '$appbb$' and TSFS = '$tsfs$'
    </select>  
    <insert id="dn0.xxtsgl_insert" parameterClass="java.util.Map"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> insert into MPAS_HYLBXXPZ( LBMC, XSMC, QZLX, LBDH, SJLY, TSFS, APPBB, XSFL ) values ( '$lbmc$','$xsmc$','$qzlx$','$lbdh$','$sjly$','$tsfs$','$appbb$','$xsfl$')
    </insert>  
    <update id="dn0.xxtsgl_update" parameterClass="java.util.Map"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update MPAS_HYLBXXPZ set LBMC = '$lbmc$',LBDH = '$lbdh$',SJLY = '$sjly$' where 1=1 and XSMC = '$xsmc$' and XSFL = '$xsfl$' and QZLX = '$qzlx$' and APPBB = '$appbb$' and TSFS = '$tsfs$'
    </update>  
    <delete id="dn0.xxtsgl_delete" parameterClass="java.util.Map"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> delete from MPAS_HYLBXXPZ where 1=1 and XSMC = '$xsmc$' and XSFL = '$xsfl$' and QZLX = '$qzlx$' and APPBB = '$appbb$' and TSFS = '$tsfs$'
    </delete>  
    <select id="dn0.xxtsgl_getHylb" parameterClass="java.util.Map" resultClass="java.util.HashMap" remapResults="true">/**!mycat:datanode=$db$**/ select lbdh,lbmc from csb_hylb</select>  
    <select id="dn0.xxtsgl_MSQL4SELECT_hylb" parameterClass="java.util.Map" resultClass="java.util.HashMap" remapResults="true">/**!mycat:datanode=$db$**/ select lbdh as key, lbmc as value from csb_hylb</select>  
    <select id="dn0.xxtsgl_MSQL4SELECT_khfabh" parameterClass="java.util.Map" resultClass="java.util.HashMap" remapResults="true">/**!mycat:datanode=$db$**/ select fabh as key,famc as value from khfa_fapz where khnf=$sysdate_yyyy$ and khdx='2'</select> 
  </sqlMap>  
  <javascript> 
    <query>jQuery(document).ready(function () { editpage_width=830; editpage_height=560; }); //自定义验证，在提交时执行。通过返回true，否则返回false function customValidate(){ return true; }</query>  
    <edit>jQuery(document).ready(function () { PAS.di.execute("xxtsgl_getHylb",showHYLBCheckBox); if($("#page_operate").val()=='add'){ $("#tsfs").change(function(){ initTsfs(); }).trigger('change'); $("#appbb").change(function(){ initAppbb(); }).trigger('change'); $("#xsfl").change(function(){ xsflChange(); }).trigger('change'); } initSjly(); $("#qzlx").change(function(){ qzlxChange(); }).trigger('change'); $("#hykhzb").change(function (){ setDefXsmc(); }); $("#jgkhzb").change(function (){ setDefXsmc(); }); $("#khfabh").change(function (){ setDefXsmc(); }); }); //自定义验证，在提交时执行。通过返回true，否则返回false function customValidate(){ var qzlx=$("#qzlx").val(); if(qzlx=='1'){ //行员考核指标 $("#sjly").val($("#hykhzb").val()); }else if(qzlx=='2'){ //机构考核指标 $("#sjly").val($("#jgkhzb").val()); }else if(qzlx=='3'){ //其他(自定义SQL) $("#sjly").val($("#zdysql").val()); }else if(qzlx=='4'){ $("#sjly").val($("#khfabh").val()); } return getTshylb(); } //APP版本下拉框初始化 function initTsfs(){ var tsfs=$("#tsfs").val(); if(tsfs=='04'){ $("#appbb").removeAttr('disabled'); $("#appbb option[value='00']").remove(); }else{ if($("#appbb option[value='00']").length&lt;=0){ $("#appbb").append("&lt;option value='00'&gt;无&lt;/option&gt;"); } $("#appbb").val('00'); $("#appbb").attr('disabled','disabled'); } initAppbb(); } function initAppbb(){ var appbb=$("#appbb").val(); if(appbb=='00'){ //显示分类：01，02，03 取值类型：1.2.3 $("#qzlx").empty(); $("#qzlx").append("&lt;option value='1'&gt;行员考核指标&lt;/option&gt;"); $("#qzlx").append("&lt;option value='2'&gt;机构考核指标&lt;/option&gt;"); $("#qzlx").append("&lt;option value='3'&gt;其他（自定义SQL）&lt;/option&gt;"); $("#xsfl").empty(); $("#xsfl").append("&lt;option value='01'&gt;个人业绩&lt;/option&gt;"); $("#xsfl").append("&lt;option value='02'&gt;个人工资&lt;/option&gt;"); $("#xsfl").append("&lt;option value='03'&gt;柜员业务量&lt;/option&gt;"); }else if(appbb=='01'){ $("#qzlx").empty(); $("#qzlx").append("&lt;option value='1'&gt;行员考核指标&lt;/option&gt;"); $("#qzlx").append("&lt;option value='4'&gt;考核方案&lt;/option&gt;"); $("#xsfl").empty(); $("#xsfl").append("&lt;option value='01'&gt;个人业绩&lt;/option&gt;"); }else if(appbb=='02'){ $("#qzlx").empty(); $("#qzlx").append("&lt;option value='1'&gt;行员考核指标&lt;/option&gt;"); $("#qzlx").append("&lt;option value='2'&gt;机构考核指标&lt;/option&gt;"); $("#xsfl").empty(); $("#xsfl").append("&lt;option value='04'&gt;机构任务完成情况&lt;/option&gt;"); $("#xsfl").append("&lt;option value='05'&gt;团队业绩&lt;/option&gt;"); } $("#xsfl").trigger('change'); } function initSjly(){ var lab=$("&lt;label id='nowsId'&gt;&lt;font style='color:red; font-size:8px;'&gt;返回：KEY,VALUE&lt;/font&gt;&lt;/label&gt;") $("#zdysql").parent().append(lab); if($("#page_operate").val()=='add'){ //添加 var qzlx=$("#qzlx").val(); if(qzlx=='1'){ //行员考核指标 $("#hykhzb").show(); $("#jgkhzb").hide(); $("#zdysql").hide(); $("#nowsId").hide(); $("#khfabh").hide(); }else if(qzlx=='2'){ //机构考核指标 $("#hykhzb").hide(); $("#jgkhzb").show(); $("#zdysql").hide(); $("#nowsId").hide(); $("#khfabh").hide(); }else if(qzlx=='3'){ //其他(自定义SQL) $("#hykhzb").hide(); $("#jgkhzb").hide(); $("#zdysql").show(); $("#nowsId").show(); $("#khfabh").hide(); }else if(qzlx=='4'){ //考核方案 $("#hykhzb").hide(); $("#jgkhzb").hide(); $("#zdysql").hide(); $("#nowsId").hide(); $("#khfabh").show(); } }else{ //修改 var qzlx=$("#qzlx").val(); if(qzlx=='1'){ //行员考核指标 $("#hykhzb").show(); $("#jgkhzb").hide(); $("#zdysql").hide(); $("#nowsId").hide(); $("#hykhzb").val($("#sjly").val()); $("#khfabh").hide(); }else if(qzlx=='2'){ //机构考核指标 $("#hykhzb").hide(); $("#jgkhzb").show(); $("#zdysql").hide(); $("#nowsId").hide(); $("#khfabh").hide(); $("#jgkhzb").val($("#sjly").val()); }else if(qzlx=='3'){ //其他(自定义SQL) $("#hykhzb").hide(); $("#jgkhzb").hide(); $("#khfabh").hide(); $("#zdysql").show(); $("#nowsId").show(); $("#zdysql").val($("#sjly").val()); }else if(qzlx=='4'){ $("#hykhzb").hide(); $("#jgkhzb").hide(); $("#zdysql").hide(); $("#nowsId").hide(); $("#khfabh").show(); $("#khfabh").val($("#sjly").val()); } } } function qzlxChange(){ var qzlx=$("#qzlx").val(); if(qzlx=='1'){ //行员考核指标 $("#hykhzb").show(); $("#jgkhzb").hide(); $("#zdysql").hide(); $("#nowsId").hide(); $("#khfabh").hide(); }else if(qzlx=='2'){ //机构考核指标 $("#hykhzb").hide(); $("#jgkhzb").show(); $("#zdysql").hide(); $("#nowsId").hide(); $("#khfabh").hide(); }else if(qzlx=='3'){ //其他(自定义SQL) $("#hykhzb").hide(); $("#jgkhzb").hide(); $("#khfabh").hide(); $("#zdysql").show(); $("#nowsId").show(); }else if(qzlx=='4'){ $("#hykhzb").hide(); $("#jgkhzb").hide(); $("#khfabh").show(); $("#zdysql").hide(); $("#nowsId").hide(); } setDefXsmc(); } function setDefXsmc(){ if($("#page_operate").val()=='add'){ var qzlx=$("#qzlx").val(); if(qzlx=='1'){ var hykhzb=$("#hykhzb").find("option:selected").text(); $("#xsmc").val(hykhzb); }else if(qzlx=='2'){ var jgkhzb=$("#jgkhzb").find("option:selected").text(); $("#xsmc").val(jgkhzb); }else if(qzlx=='4'){ var khfabh=$("#khfabh").find("option:selected").text(); $("#xsmc").val(khfabh); }else{ $("#xsmc").val(''); } } } //显示行员类别 function showHYLBCheckBox(obj){ if(obj.data.length&gt;0){ var hylbDiv=$('&lt;div id="hylbdiv" style="width:690px;"&gt;&lt;/div&gt;'); $("#lbdh").parent().append(hylbDiv); $("#lbdh").parent().css('border','1px solid rgb(190, 186, 186)'); var jsonResult=obj.data; for(var index=0;index&lt;jsonResult.length;index++){ var checkbox = $('&lt;span style="display: block;float: left;width: 230px;"&gt;&lt;input type="checkbox" class="hylblist" name="hylblist" value="' +jsonResult[index].LBDH+'" lbmc="'+jsonResult[index].LBMC+'"/&gt;'+jsonResult[index].LBMC+'&lt;/span&gt;'); hylbDiv.append(checkbox); } PAS.di.setDone(obj.sqlid); }else{ custom_alert("系统没有初始化行员类别信息!"); } if($("#page_operate").val()=='update'){ //初始化行员类别的值 initHylbBox(); } } //初始化行员类别复选框的选中事件； function initHylbBox(){ var tshylb=$("#lbdh").val(); if(tshylb.length&gt;0){ var hylbArr=tshylb.split(","); setHylbBoxChecked(hylbArr); } } function setHylbBoxChecked(hylbArr){ for(var i=0;i&lt;hylbArr.length;i++){ $('#hylbdiv :checkbox[value='+hylbArr[i]+']').prop('checked','checked'); } } function getTshylb(){ var resultStr=''; var tshylbmc=''; $('#hylbdiv :checkbox[checked]').each(function(){ var that=$(this); resultStr+=that.val()+","; tshylbmc+=that.attr('lbmc')+","; }); if(resultStr.length&gt;0){ resultStr=resultStr.substring(0,resultStr.length-1); }else{ custom_alert('请至少选择一个行员类别!'); return false; } if(tshylbmc.length&gt;0){ tshylbmc=tshylbmc.substring(0,tshylbmc.length-1); } $("#lbdh").val(resultStr); $("#lbmc").val(tshylbmc); return true; } function xsflChange(){ var tsfs=$("#tsfs").val(); var appbb=$("#appbb").val(); if(tsfs=='04'&amp;&amp;appbb=='02'){ var xsfl=$("#xsfl").val(); if(xsfl=='04'){ //机构 $("#qzlx").empty(); $("#qzlx").append("&lt;option value='2'&gt;机构考核指标&lt;/option&gt;"); }else{ $("#qzlx").empty(); $("#qzlx").append("&lt;option value='1'&gt;行员考核指标&lt;/option&gt;"); } } $("#qzlx").trigger('change'); }</edit> 
  </javascript> 
</pageSetting>
