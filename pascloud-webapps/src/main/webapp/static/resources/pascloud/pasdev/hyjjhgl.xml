<?xml version="1.0" encoding="UTF-8"?>

<pageSetting id="hyjjhgl" title="行员季计划管理" type="manage" version="1.0.0.0" pid="" desc="标准版"> 
  <conPart> 
    <tags> 
      <tag row="0" col="0" rowspan="1" colspan="1" name="Date" label="年份" fieldName=""> 
        <attribute key="isRequired" value="true"/>  
        <attribute key="name" value="khnf"/>  
        <attribute key="minDate" value="no"/>  
        <attribute key="defValType" value="sysDate"/>  
        <attribute key="dateFmt" value="yyyy"/>  
        <attribute key="readonly" value="false"/>  
        <attribute key="editable" value="true"/> 
      </tag>  
      <tag row="0" col="1" rowspan="1" colspan="1" name="NewMultipleHy" label="行员" fieldName=""> 
        <attribute key="isRequired" value="false"/>  
        <attribute key="style" value="width:160px;"/>  
        <attribute key="isDisplayXN" value="false"/>  
        <attribute key="jgckbz" value="jg_ckhy"/>  
        <attribute key="name" value="hykhdxdh"/>  
        <attribute key="multiple" value="true"/>  
        <attribute key="editable" value="true"/> 
      </tag>  
      <tag row="0" col="2" rowspan="1" colspan="2" name="HYKhzbSelect" label="考核指标" fieldName=""> 
        <attribute key="isSearch" value="true"/>  
        <attribute key="isRequired" value="false"/>  
        <attribute key="isMultiple" value="false"/>  
        <attribute key="defVal" value="全部"/>  
        <attribute key="name" value="khzbdh"/>  
        <attribute key="width" value="250px"/>  
        <attribute key="isAll" value="true"/>  
        <attribute key="isEditable" value="true"/> 
      </tag> 
    </tags> 
  </conPart>  
  <table page="true" id="hyjjhgltable"> 
    <col id="KHNF" title="年份" align="left" type="string" width="120" format="" frozen="false" mergeCells="false" footerCells="false" exp="true" zsy="true" showDymCol="false"/>  
    <col id="JGDH" title="机构代号" align="left" type="string" width="120" format="" frozen="false" mergeCells="false" footerCells="false" exp="true" zsy="true" showDymCol="false"/>  
    <col id="JGMC" title="机构名称" align="left" type="string" width="150" format="" frozen="false" mergeCells="false" footerCells="false" exp="true" zsy="true" showDymCol="false"/>  
    <col id="HYDH" title="行员代号" align="left" type="string" width="75" format="" frozen="false" mergeCells="false" footerCells="false" exp="true" zsy="true" showDymCol="false"/>  
    <col id="HYMC" title="行员名称" align="left" type="string" width="90" format="" frozen="false" mergeCells="false" footerCells="false" exp="true" zsy="true" showDymCol="false"/>  
    <col id="KHZBMC" title="考核指标名称" align="center" type="string" width="120" format="" frozen="false" mergeCells="false" footerCells="false" exp="true" zsy="true" showDymCol="false"/>  
    <col id="KHZBDH" title="KHZBDH" align="center" type="hidden" width="120" format="" frozen="false" mergeCells="false" footerCells="false" exp="true" zsy="true"/>  
    <col id="KHDXDH" title="考核对象代号" align="left" type="hidden" width="120" format="" frozen="false" mergeCells="false" footerCells="false" exp="true" zsy="true" showDymCol="true"/>  
    <col id="" title="1季" align="left" type="string" width="240" format="" frozen="false" mergeCells="false" footerCells="false" exp="true" zsy="true" showDymCol="false"> 
      <col id="JHZ1" title="计划值" align="right" type="float" width="120" format="##0.00" frozen="" mergeCells="" footerCells="" exp="true" zsy="true" showDymCol="false"/>  
      <col id="LZZ1" title="力争值" align="right" type="float" width="120" format="##0.00" frozen="" mergeCells="" footerCells="" exp="true" zsy="true" showDymCol="false"/> 
    </col>  
    <col id="" title="2季" align="left" type="string" width="240" format="" frozen="false" mergeCells="false" footerCells="false" exp="true" zsy="true" showDymCol="false"> 
      <col id="JHZ2" title="计划值" align="right" type="float" width="120" format="##0.00" frozen="" mergeCells="" footerCells="" exp="true" zsy="true" showDymCol="false"/>  
      <col id="LZZ2" title="力争值" align="right" type="float" width="120" format="##0.00" frozen="" mergeCells="" footerCells="" exp="true" zsy="true" showDymCol="false"/> 
    </col>  
    <col id="" title="3季" align="left" type="string" width="240" format="" frozen="false" mergeCells="false" footerCells="false" exp="true" zsy="true" showDymCol="false"> 
      <col id="JHZ3" title="计划值" align="right" type="float" width="120" format="##0.00" frozen="" mergeCells="" footerCells="" exp="true" zsy="true" showDymCol="false"/>  
      <col id="LZZ3" title="力争值" align="right" type="float" width="120" format="##0.00" frozen="" mergeCells="" footerCells="" exp="true" zsy="true" showDymCol="false"/> 
    </col>  
    <col id="" title="4季" align="left" type="string" width="240" format="" frozen="false" mergeCells="false" footerCells="false" exp="true" zsy="true" showDymCol="false"> 
      <col id="JHZ4" title="计划值" align="right" type="float" width="120" format="##0.00" frozen="" mergeCells="" footerCells="" exp="true" zsy="true" showDymCol="false"/>  
      <col id="LZZ4" title="力争值" align="right" type="float" width="120" format="##0.00" frozen="" mergeCells="" footerCells="" exp="true" zsy="true" showDymCol="false"/> 
    </col> 
  </table>  
  <rels> 
    <items id="hyjjhgltable"/> 
  </rels>  
  <addPage title="编辑页面"> 
    <tag row="0" col="0" rowspan="1" colspan="1" name="Text" label="年份" fieldName="KHNF"> 
      <attribute key="style" value="width:157px"/>  
      <attribute key="name" value="jgnjh_nf"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="false"/> 
    </tag>  
    <tag row="1" col="0" rowspan="1" colspan="1" name="NewMultipleHy" label="行员" fieldName="KHDXDH"> 
      <attribute key="isRequired" value="true"/>  
      <attribute key="style" value="width:157px"/>  
      <attribute key="isDisplayXN" value="true"/>  
      <attribute key="jgckbz" value="jg_ckhy"/>  
      <attribute key="name" value="khdxdh"/>  
      <attribute key="multiple" value="false"/>  
      <attribute key="editable" value="false"/> 
    </tag>  
    <tag row="2" col="0" rowspan="1" colspan="1" name="Text" label="考核指标" fieldName=""> 
      <attribute key="style" value="width:157px"/>  
      <attribute key="name" value="khzbmc"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="false"/> 
    </tag>  
    <tag row="2" col="1" rowspan="1" colspan="1" name="Hidden" label="" fieldName="KHZBDH"> 
      <attribute key="name" value="KHZBDH"/> 
    </tag>  
    <tag row="3" col="0" rowspan="1" colspan="1" name="Number" label="1季度  计划值" fieldName="JHZ1"> 
      <attribute key="precision" value="4"/>  
      <attribute key="style" value="160px;text-align:right;"/>  
      <attribute key="name" value="jgnjh_jhz1"/>  
      <attribute key="intparts" value="21"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag>  
    <tag row="3" col="1" rowspan="1" colspan="1" name="Number" label="力争值" fieldName="LZZ1"> 
      <attribute key="precision" value="4"/>  
      <attribute key="style" value="160px;text-align:right;"/>  
      <attribute key="name" value="hyjjh_lzz1"/>  
      <attribute key="intparts" value="21"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag>  
    <tag row="4" col="0" rowspan="1" colspan="1" name="Number" label="2季度  计划值" fieldName="JHZ2"> 
      <attribute key="precision" value="4"/>  
      <attribute key="style" value="160px;text-align:right;"/>  
      <attribute key="name" value="jgnjh_jhz2"/>  
      <attribute key="intparts" value="21"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag>  
    <tag row="4" col="1" rowspan="1" colspan="1" name="Number" label="力争值" fieldName="LZZ2"> 
      <attribute key="precision" value="4"/>  
      <attribute key="style" value="160px;text-align:right;"/>  
      <attribute key="name" value="hyjjh_lzz2"/>  
      <attribute key="intparts" value="21"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag>  
    <tag row="5" col="0" rowspan="1" colspan="1" name="Number" label="3季度  计划值" fieldName="JHZ3"> 
      <attribute key="precision" value="4"/>  
      <attribute key="style" value="160px;text-align:right;"/>  
      <attribute key="name" value="jgnjh_jhz3"/>  
      <attribute key="intparts" value="21"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag>  
    <tag row="5" col="1" rowspan="1" colspan="1" name="Number" label="力争值" fieldName="LZZ3"> 
      <attribute key="precision" value="4"/>  
      <attribute key="style" value="160px;text-align:right;"/>  
      <attribute key="name" value="hyjjh_lzz3"/>  
      <attribute key="intparts" value="21"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag>  
    <tag row="6" col="0" rowspan="1" colspan="1" name="Number" label="4季度  计划值" fieldName="JHZ4"> 
      <attribute key="precision" value="4"/>  
      <attribute key="style" value="160px;text-align:right;"/>  
      <attribute key="name" value="jgnjh_jhz4"/>  
      <attribute key="intparts" value="21"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag>  
    <tag row="6" col="1" rowspan="1" colspan="1" name="Number" label="力争值" fieldName="LZZ4"> 
      <attribute key="precision" value="4"/>  
      <attribute key="style" value="160px;text-align:right;"/>  
      <attribute key="name" value="hyjjh_lzz4"/>  
      <attribute key="intparts" value="21"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag> 
  </addPage>  
  <updatePage title="编辑页面"> 
    <tag row="0" col="0" rowspan="1" colspan="1" name="Text" label="年份" fieldName="KHNF"> 
      <attribute key="style" value="width:157px"/>  
      <attribute key="name" value="jgnjh_nf"/>  
      <attribute key="isAll" value="false"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="isEditable" value="false"/>  
      <attribute key="editable" value="false"/> 
    </tag>  
    <tag row="1" col="0" rowspan="1" colspan="1" name="NewMultipleHy" label="行员" fieldName="KHDXDH"> 
      <attribute key="isRequired" value="true"/>  
      <attribute key="style" value="width:157px"/>  
      <attribute key="isDisplayXN" value="true"/>  
      <attribute key="jgckbz" value="jg_ckhy"/>  
      <attribute key="name" value="khdxdh"/>  
      <attribute key="isAll" value="false"/>  
      <attribute key="multiple" value="false"/>  
      <attribute key="isEditable" value="false"/>  
      <attribute key="editable" value="false"/> 
    </tag>  
    <tag row="2" col="0" rowspan="1" colspan="1" name="Text" label="考核指标" fieldName=""> 
      <attribute key="style" value="width:157px"/>  
      <attribute key="name" value="khzbmc"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="false"/> 
    </tag>  
    <tag row="2" col="1" rowspan="1" colspan="1" name="Hidden" label="" fieldName="KHZBDH"> 
      <attribute key="name" value="KHZBDH"/> 
    </tag>  
    <tag row="3" col="0" rowspan="1" colspan="1" name="Number" label="1季度  计划值" fieldName="JHZ1"> 
      <attribute key="precision" value="4"/>  
      <attribute key="style" value="160px;text-align:right;"/>  
      <attribute key="name" value="jgnjh_jhz1"/>  
      <attribute key="intparts" value="21"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag>  
    <tag row="3" col="1" rowspan="1" colspan="1" name="Number" label="力争值" fieldName="LZZ1"> 
      <attribute key="precision" value="4"/>  
      <attribute key="style" value="160px;text-align:right;"/>  
      <attribute key="name" value="hyjjh_lzz1"/>  
      <attribute key="intparts" value="21"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag>  
    <tag row="4" col="0" rowspan="1" colspan="1" name="Number" label="2季度  计划值" fieldName="JHZ2"> 
      <attribute key="precision" value="4"/>  
      <attribute key="style" value="160px;text-align:right;"/>  
      <attribute key="name" value="jgnjh_jhz2"/>  
      <attribute key="intparts" value="21"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag>  
    <tag row="4" col="1" rowspan="1" colspan="1" name="Number" label="力争值" fieldName="LZZ2"> 
      <attribute key="precision" value="4"/>  
      <attribute key="style" value="160px;text-align:right;"/>  
      <attribute key="name" value="hyjjh_lzz2"/>  
      <attribute key="intparts" value="21"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag>  
    <tag row="5" col="0" rowspan="1" colspan="1" name="Number" label="3季度  计划值" fieldName="JHZ3"> 
      <attribute key="precision" value="4"/>  
      <attribute key="style" value="160px;text-align:right;"/>  
      <attribute key="name" value="jgnjh_jhz3"/>  
      <attribute key="intparts" value="21"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag>  
    <tag row="5" col="1" rowspan="1" colspan="1" name="Number" label="力争值" fieldName="LZZ3"> 
      <attribute key="precision" value="4"/>  
      <attribute key="style" value="160px;text-align:right;"/>  
      <attribute key="name" value="hyjjh_lzz3"/>  
      <attribute key="intparts" value="21"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag>  
    <tag row="6" col="0" rowspan="1" colspan="1" name="Number" label="4季度  计划值" fieldName="JHZ4"> 
      <attribute key="precision" value="4"/>  
      <attribute key="style" value="160px;text-align:right;"/>  
      <attribute key="name" value="jgnjh_jhz4"/>  
      <attribute key="intparts" value="21"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag>  
    <tag row="6" col="1" rowspan="1" colspan="1" name="Number" label="力争值" fieldName="LZZ4"> 
      <attribute key="precision" value="4"/>  
      <attribute key="style" value="160px;text-align:right;"/>  
      <attribute key="name" value="hyjjh_lzz4"/>  
      <attribute key="intparts" value="21"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag> 
  </updatePage>  
  <buttons> 
    <button>add</button>  
    <button>edit</button>  
    <button>delete</button>  
    <button>import</button> 
  </buttons>  
  <flow> 
    <insertbefore/>  
    <insertafter/>  
    <deletebefore/>  
    <deleteafter/>  
    <updatebefore/>  
    <updateafter/> 
  </flow>  
  <sqlMap namespace="studio.hyjjhgl"> 
    <select id="dn0.hyjjhglList" parameterClass="java.util.Map" resultClass="java.util.HashMap" remapResults="true"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> select jjh.khnf,jg.jgdh,jg.jgmc,jjh.khdxdh,hy.hydh,hy.hymc,khzb.khzbmc,1,2,3,4, jjh.jhz1,jjh.lzz1,jjh.jhz2,jjh.lzz2,jjh.jhz3,jjh.lzz3,jjh.jhz4,jjh.lzz4,khzb.khzbdh from khfa_khzb_hy khzb inner join yjzb_hyjjh jjh on khzb.khzbdh=jjh.khzbdh inner join khdx_hy hy on hy.khdxdh=jjh.khdxdh inner join khdx_jgcy jgcy on jgcy.khdxdh=hy.khdxdh and jgcy.jsrq = 29991231 inner join khdx_jg jg on jg.khdxdh = jgcy.jgkhdxdh inner join table(fn_getsjjg_java_qxhy($sysdate$,$login_khdxdh$,0)) qx on qx.khdxdh=hy.khdxdh where 1=1 
      <isNotEmpty property="khnf">and jjh.khnf=$khnf$</isNotEmpty>  
      <isNotEmpty property="khzbdh">and khzb.khzbdh=$khzbdh$</isNotEmpty>  
      <isNotEmpty property="hykhdxdh">and hy.khdxdh in ($hykhdxdh$)</isNotEmpty> order by khzb.zbpx
    </select>  
    <select id="dn0.hyjjhglCount" parameterClass="java.util.Map" resultClass="java.lang.Integer"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> select count(1) from ( select jjh.khnf,jg.jgdh,jg.jgmc,jjh.khdxdh,hy.hydh,hy.hymc,khzb.khzbmc,1,2,3,4, jjh.jhz1,jjh.lzz1,jjh.jhz2,jjh.lzz2,jjh.jhz3,jjh.lzz3,jjh.jhz4,jjh.lzz4,khzb.khzbdh from khfa_khzb_hy khzb inner join yjzb_hyjjh jjh on khzb.khzbdh=jjh.khzbdh inner join khdx_hy hy on hy.khdxdh=jjh.khdxdh inner join khdx_jgcy jgcy on jgcy.khdxdh=hy.khdxdh and jgcy.jsrq = 29991231 inner join khdx_jg jg on jg.khdxdh = jgcy.jgkhdxdh inner join table(fn_getsjjg_java_qxhy($sysdate$,$login_khdxdh$,0)) qx on qx.khdxdh=hy.khdxdh where 1=1 
      <isNotEmpty property="khnf">and jjh.khnf=$khnf$</isNotEmpty>  
      <isNotEmpty property="khzbdh">and khzb.khzbdh=$khzbdh$</isNotEmpty>  
      <isNotEmpty property="hykhdxdh">and hy.khdxdh in ($hykhdxdh$)</isNotEmpty> order by khzb.zbpx ) t
    </select>  
    <select id="dn0.hyjjhgl_select_by_primaryKey" parameterClass="java.util.Map" resultClass="java.util.HashMap" remapResults="true"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> select KHNF, LZZ4, JHZ4, KHDXDH, KHZBDH, LZZ3, JHZ3, LZZ2, JHZ2, LZZ1, JHZ1 from YJZB_HYJJH where 1= 1 and KHNF = $khnf$ and KHDXDH = $khdxdh$ and KHZBDH = $khzbdh$
    </select>  
    <select id="dn0.hyjjhgl_check_insert" parameterClass="java.util.Map" resultClass="java.util.HashMap"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> select KHNF, LZZ4, JHZ4, KHDXDH, KHZBDH, LZZ3, JHZ3, LZZ2, JHZ2, LZZ1, JHZ1 from YJZB_HYJJH where 1= 1 and KHNF = $jgnjh_nf$ and KHDXDH = $khdxdh$ and KHZBDH = $KHZBDH$
    </select>  
    <insert id="dn0.hyjjhgl_insert" parameterClass="java.util.Map"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> insert into YJZB_HYJJH( JHZ3, LZZ2, LZZ3, JHZ2, JHZ1, KHNF, LZZ1, KHDXDH, KHZBDH, LZZ4, JHZ4 ) values ( $jgnjh_jhz3$,$hyjjh_lzz2$,$hyjjh_lzz3$,$jgnjh_jhz2$,$jgnjh_jhz1$,$jgnjh_nf$,$hyjjh_lzz1$,$khdxdh$,$KHZBDH$,$hyjjh_lzz4$,$jgnjh_jhz4$)
    </insert>  
    <update id="dn0.hyjjhgl_update" parameterClass="java.util.Map"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update YJZB_HYJJH set JHZ3 = $jgnjh_jhz3$,LZZ2 = $hyjjh_lzz2$,LZZ3 = $hyjjh_lzz3$,JHZ2 = $jgnjh_jhz2$,JHZ1 = $jgnjh_jhz1$,LZZ1 = $hyjjh_lzz1$,LZZ4 = $hyjjh_lzz4$,JHZ4 = $jgnjh_jhz4$ where 1=1 and KHNF = $jgnjh_nf$ and KHDXDH = $khdxdh$ and KHZBDH = $KHZBDH$
    </update>  
    <delete id="dn0.hyjjhgl_delete" parameterClass="java.util.Map"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> delete from YJZB_HYJJH where 1=1 and KHNF = $khnf$ and KHDXDH = $khdxdh$ and KHZBDH = $khzbdh$
    </delete> 
  </sqlMap>  
  <javascript> 
    <import>parent.addTab('hyjjhgldr','行员季计划管理','/module/parser/import/visitHtml/hyjjhgldr');</import>  
    <query>jQuery(document).ready(function () { jQuery("input[value='添 加']").hide(); jQuery("#exportBtn").show(); }); //自定义验证，在提交时执行。通过返回true，否则返回false function customValidate(){ return true; }</query>  
    <edit>jQuery(document).ready(function () { //这里的js脚本，会在页面加载完成后执行 for(var i=1;i&lt;5;i++){ $("#hyjjh_lzz"+i).removeClass().addClass("{decimal:[21,4]}"); } }); //自定义验证，在提交时执行。通过返回true，否则返回false function customValidate(){ for(var i=1;i&lt;5;i++){ if($('#hyjjh_lzz'+i).val()==null ||$('#hyjjh_lzz'+i).val()==''){ $('#hyjjh_lzz'+i).val('null'); } } return true; }</edit> 
  </javascript> 
</pageSetting>
