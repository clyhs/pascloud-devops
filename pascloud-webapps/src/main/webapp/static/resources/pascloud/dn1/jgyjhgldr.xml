<?xml version="1.0" encoding="UTF-8"?>

<pageSetting id="jgyjhgldr" title="机构月计划管理导入" type="import" version="2.0.0"> 
  <template> 
    <src>ONLINE</src>  
    <column> 
      <text>年份</text>  
      <name>khnf</name>  
      <index>0</index>  
      <width>120</width>  
      <height/>  
      <align>center</align>  
      <annotate/>  
      <length>100</length>  
      <req>Y</req> 
    </column>  
    <column> 
      <text>机构代号</text>  
      <name>jgdh</name>  
      <index>1</index>  
      <width>120</width>  
      <height/>  
      <align>center</align>  
      <annotate/>  
      <length>100</length>  
      <req>Y</req> 
    </column>  
    <column> 
      <text>机构名称</text>  
      <name>jgmc</name>  
      <index>2</index>  
      <width>120</width>  
      <height/>  
      <align>center</align>  
      <annotate/>  
      <length>100</length>  
      <req>N</req> 
    </column>  
    <column> 
      <text>考核指标名称</text>  
      <name>khzbmc</name>  
      <index>3</index>  
      <width>120</width>  
      <height/>  
      <align>center</align>  
      <annotate/>  
      <length>100</length>  
      <req>Y</req> 
    </column>  
    <column> 
      <text>计划值</text>  
      <name>jhz1</name>  
      <index>4</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>Y</req> 
    </column>  
    <column> 
      <text>力争值</text>  
      <name>lzz1</name>  
      <index>5</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>N</req> 
    </column>  
    <column> 
      <text>计划值</text>  
      <name>jhz2</name>  
      <index>6</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>Y</req> 
    </column>  
    <column> 
      <text>力争值</text>  
      <name>lzz2</name>  
      <index>7</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>N</req> 
    </column>  
    <column> 
      <text>计划值</text>  
      <name>jhz3</name>  
      <index>8</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>Y</req> 
    </column>  
    <column> 
      <text>力争值</text>  
      <name>lzz3</name>  
      <index>9</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>N</req> 
    </column>  
    <column> 
      <text>计划值</text>  
      <name>jhz4</name>  
      <index>10</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>Y</req> 
    </column>  
    <column> 
      <text>力争值</text>  
      <name>lzz4</name>  
      <index>11</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>N</req> 
    </column>  
    <column> 
      <text>计划值</text>  
      <name>jhz5</name>  
      <index>12</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>Y</req> 
    </column>  
    <column> 
      <text>力争值</text>  
      <name>lzz5</name>  
      <index>13</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>N</req> 
    </column>  
    <column> 
      <text>计划值</text>  
      <name>jhz6</name>  
      <index>14</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>Y</req> 
    </column>  
    <column> 
      <text>力争值</text>  
      <name>lzz6</name>  
      <index>15</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>N</req> 
    </column>  
    <column> 
      <text>计划值</text>  
      <name>jhz7</name>  
      <index>16</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>Y</req> 
    </column>  
    <column> 
      <text>力争值</text>  
      <name>lzz7</name>  
      <index>17</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>N</req> 
    </column>  
    <column> 
      <text>计划值</text>  
      <name>jhz8</name>  
      <index>18</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>Y</req> 
    </column>  
    <column> 
      <text>力争值</text>  
      <name>lzz8</name>  
      <index>19</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>N</req> 
    </column>  
    <column> 
      <text>计划值</text>  
      <name>jhz9</name>  
      <index>20</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>Y</req> 
    </column>  
    <column> 
      <text>力争值</text>  
      <name>lzz9</name>  
      <index>21</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>N</req> 
    </column>  
    <column> 
      <text>计划值</text>  
      <name>jhz10</name>  
      <index>22</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>Y</req> 
    </column>  
    <column> 
      <text>力争值</text>  
      <name>lzz10</name>  
      <index>23</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>N</req> 
    </column>  
    <column> 
      <text>计划值</text>  
      <name>jhz11</name>  
      <index>24</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>Y</req> 
    </column>  
    <column> 
      <text>力争值</text>  
      <name>lzz11</name>  
      <index>25</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>N</req> 
    </column>  
    <column> 
      <text>计划值</text>  
      <name>jhz12</name>  
      <index>26</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>Y</req> 
    </column>  
    <column> 
      <text>力争值</text>  
      <name>lzz12</name>  
      <index>27</index>  
      <width>120</width>  
      <height/>  
      <align>right</align>  
      <annotate/>  
      <length>100</length>  
      <req>N</req> 
    </column>  
    <data> 
      <tags> 
        <tag row="0" col="0" name="Date" label="年份" colspan="1" rowspan="1"> 
          <attribute key="style" value="width:160px;"/>  
          <attribute key="isRequired" value="true"/>  
          <attribute key="defVal" value=""/>  
          <attribute key="name" value="nf"/>  
          <attribute key="styleClass" value=""/>  
          <attribute key="minDate" value="no"/>  
          <attribute key="defValType" value="sysDate"/>  
          <attribute key="dateFmt" value="yyyy"/>  
          <attribute key="editable" value="true"/> 
        </tag>  
        <tag row="1" col="0" name="NewJg" label="机构" colspan="1" rowspan="1"> 
          <attribute key="ckbz" value="jg_ckhy"/>  
          <attribute key="cascadeCheck" value="true"/>  
          <attribute key="isRequired" value="true"/>  
          <attribute key="style" value="width:160px;"/>  
          <attribute key="defVal" value=""/>  
          <attribute key="name" value="jgkhdxdh"/>  
          <attribute key="multiple" value="true"/>  
          <attribute key="editable" value="true"/> 
        </tag>  
        <tag row="2" col="0" name="MSQL4Select" label="考核指标名称" colspan="1" rowspan="1"> 
          <attribute key="parents" value=""/>  
          <attribute key="sql" value="select khzbdh as key,khzbmc as value from khfa_khzb_jg"/>  
          <attribute key="isSearch" value="true"/>  
          <attribute key="style" value="width:160px;"/>  
          <attribute key="isRequired" value="false"/>  
          <attribute key="isMultiple" value="false"/>  
          <attribute key="defVal" value=""/>  
          <attribute key="name" value="khzbmc"/>  
          <attribute key="width" value=""/>  
          <attribute key="isAll" value="false"/>  
          <attribute key="isEditable" value="true"/> 
        </tag> 
      </tags> 
    </data> 
  </template>  
  <table id="jgyjhgldr_table" page="true" extendRow="2"> 
    <col id="ZT" title="状态" align="center" type="string" width="50"/>  
    <col id="ERROR" title="错误原因" align="center" type="string" width="250"/>  
    <col id="KHNF" title="年份" align="center" type="" width="120"/>  
    <col id="JGDH" title="机构代号" align="center" type="" width="120"/>  
    <col id="JGMC" title="机构名称" align="center" type="" width="120"/>  
    <col id="KHZBMC" title="考核指标名称" align="center" type="" width="120"/>  
    <col title="1月" id="88b76867-ff53-4acb-84c4-5351234c2ede" align="center" type="string" width="90" frozen="false" format="" mergeCells="false" footerCells="false"> 
      <col id="JHZ1" title="计划值" align="right" type="" width="120"/>  
      <col id="LZZ1" title="力争值" align="right" type="" width="120"/> 
    </col>  
    <col title="2月" id="e1013902-387e-4133-a654-5bcb117ffdb1" align="center" type="string" width="90" frozen="false" format="" mergeCells="false" footerCells="false"> 
      <col id="JHZ2" title="计划值" align="right" type="" width="120"/>  
      <col id="LZZ2" title="力争值" align="right" type="" width="120"/> 
    </col>  
    <col title="3月" id="354d8d7e-b7a3-4e1d-bf35-1a45e35bc825" align="center" type="string" width="90" frozen="false" format="" mergeCells="false" footerCells="false"> 
      <col id="JHZ3" title="计划值" align="right" type="" width="120"/>  
      <col id="LZZ3" title="力争值" align="right" type="" width="120"/> 
    </col>  
    <col title="4月" id="bc3a732c-7479-473d-89f8-af0ed20341e8" align="center" type="string" width="90" frozen="false" format="" mergeCells="false" footerCells="false"> 
      <col id="JHZ4" title="计划值" align="right" type="" width="120"/>  
      <col id="LZZ4" title="力争值" align="right" type="" width="120"/> 
    </col>  
    <col title="5月" id="f2fdd303-972c-4390-8887-8ace6f0d953f" align="center" type="string" width="90" frozen="false" format="" mergeCells="false" footerCells="false"> 
      <col id="JHZ5" title="计划值" align="right" type="" width="120"/>  
      <col id="LZZ5" title="力争值" align="right" type="" width="120"/> 
    </col>  
    <col title="6月" id="5479e050-427a-4032-a192-54b9d9c710a3" align="center" type="string" width="90" frozen="false" format="" mergeCells="false" footerCells="false"> 
      <col id="JHZ6" title="计划值" align="right" type="" width="120"/>  
      <col id="LZZ6" title="力争值" align="right" type="" width="120"/> 
    </col>  
    <col title="7月" id="32043e06-b785-4d77-9142-2adfe998bd4f" align="center" type="string" width="90" frozen="false" format="" mergeCells="false" footerCells="false"> 
      <col id="JHZ7" title="计划值" align="right" type="" width="120"/>  
      <col id="LZZ7" title="力争值" align="right" type="" width="120"/> 
    </col>  
    <col title="8月" id="b5cd2529-1772-42d2-906f-f549a0db6a55" align="center" type="string" width="90" frozen="false" format="" mergeCells="false" footerCells="false"> 
      <col id="JHZ8" title="计划值" align="right" type="" width="120"/>  
      <col id="LZZ8" title="力争值" align="right" type="" width="120"/> 
    </col>  
    <col title="9月" id="566ae925-5b57-4051-9bda-e8264f1d4b0f" align="center" type="string" width="90" frozen="false" format="" mergeCells="false" footerCells="false"> 
      <col id="JHZ9" title="计划值" align="right" type="" width="120"/>  
      <col id="LZZ9" title="力争值" align="right" type="" width="120"/> 
    </col>  
    <col title="10月" id="41b852b8-caa5-4986-96b2-f25955da0fbf" align="center" type="string" width="90" frozen="false" format="" mergeCells="false" footerCells="false"> 
      <col id="JHZ10" title="计划值" align="right" type="" width="120"/>  
      <col id="LZZ10" title="力争值" align="right" type="" width="120"/> 
    </col>  
    <col title="11月" id="8b735e35-cd82-420e-af0f-616f46a4d5a4" align="center" type="string" width="90" frozen="false" format="" mergeCells="false" footerCells="false"> 
      <col id="JHZ11" title="计划值" align="right" type="" width="120"/>  
      <col id="LZZ11" title="力争值" align="right" type="" width="120"/> 
    </col>  
    <col title="12月" id="617ba118-e0f5-42ef-adcc-d0e8f26b92ca" align="center" type="string" width="90" frozen="false" format="" mergeCells="false" footerCells="false"> 
      <col id="JHZ12" title="计划值" align="right" type="" width="120"/>  
      <col id="LZZ12" title="力争值" align="right" type="" width="120"/> 
    </col> 
  </table>  
  <flow> 
    <rule> 
      <sql type="update">jgyjhgldr_check_khnf_0</sql>  
      <sql type="update">jgyjhgldr_check_khnf_1</sql>  
      <sql type="update">jgyjhgldr_check_jgdh_2</sql>  
      <sql type="update">jgyjhgldr_check_jgdh_3</sql>  
      <sql type="update">jgyjhgldr_check_jgdh_4</sql>  
      <sql type="update">jgyjhgldr_check_khzbmc_5</sql>  
      <sql type="update">jgyjhgldr_check_jhz1_6</sql>  
      <sql type="update">jgyjhgldr_check_jhz1_7</sql>  
      <sql type="update">jgyjhgldr_check_lzz1_8</sql>  
      <sql type="update">jgyjhgldr_check_jhz2_9</sql>  
      <sql type="update">jgyjhgldr_check_jhz2_10</sql>  
      <sql type="update">jgyjhgldr_check_lzz2_11</sql>  
      <sql type="update">jgyjhgldr_check_jhz3_12</sql>  
      <sql type="update">jgyjhgldr_check_jhz3_13</sql>  
      <sql type="update">jgyjhgldr_check_lzz3_14</sql>  
      <sql type="update">jgyjhgldr_check_jhz4_15</sql>  
      <sql type="update">jgyjhgldr_check_jhz4_16</sql>  
      <sql type="update">jgyjhgldr_check_lzz4_17</sql>  
      <sql type="update">jgyjhgldr_check_jhz5_18</sql>  
      <sql type="update">jgyjhgldr_check_jhz5_19</sql>  
      <sql type="update">jgyjhgldr_check_lzz5_20</sql>  
      <sql type="update">jgyjhgldr_check_jhz6_21</sql>  
      <sql type="update">jgyjhgldr_check_jhz6_22</sql>  
      <sql type="update">jgyjhgldr_check_lzz6_23</sql>  
      <sql type="update">jgyjhgldr_check_jhz7_24</sql>  
      <sql type="update">jgyjhgldr_check_jhz7_25</sql>  
      <sql type="update">jgyjhgldr_check_lzz7_26</sql>  
      <sql type="update">jgyjhgldr_check_jhz8_27</sql>  
      <sql type="update">jgyjhgldr_check_jhz8_28</sql>  
      <sql type="update">jgyjhgldr_check_lzz8_29</sql>  
      <sql type="update">jgyjhgldr_check_jhz9_30</sql>  
      <sql type="update">jgyjhgldr_check_jhz9_31</sql>  
      <sql type="update">jgyjhgldr_check_lzz9_32</sql>  
      <sql type="update">jgyjhgldr_check_jhz10_33</sql>  
      <sql type="update">jgyjhgldr_check_jhz10_34</sql>  
      <sql type="update">jgyjhgldr_check_lzz10_35</sql>  
      <sql type="update">jgyjhgldr_check_jhz11_36</sql>  
      <sql type="update">jgyjhgldr_check_jhz11_37</sql>  
      <sql type="update">jgyjhgldr_check_lzz11_38</sql>  
      <sql type="update">jgyjhgldr_check_jhz12_39</sql>  
      <sql type="update">jgyjhgldr_check_jhz12_40</sql>  
      <sql type="update">jgyjhgldr_check_lzz12_41</sql>  
      <sql type="update">jgyjhgldr_checkupdate_khnf_0</sql>  
      <sql type="update">jgyjhgldr_checkupdate_jgmc_0</sql>  
      <sql type="update">jgyjhgldr_checkupdate_khzbmc_0</sql>  
      <sql type="update">jgyjhgldr_exists_target</sql>  
      <sql type="update">jgyjhgldr_exists_same_temp</sql> 
    </rule>  
    <before/>  
    <cover> 
      <sql type="delete">jgyjhgldr_delete_before_override</sql> 
    </cover>  
    <insert> 
      <sql type="insert">jgyjhgldr_insert_into_target</sql> 
    </insert>  
    <after/> 
  </flow>  
  <sqlMap namespace="studio.jgyjhgldr"> 
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_khnf_0"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'年份输入错误，格式应该是:yyyy!' where f_java_rule_date(t.khnf,'yyyy')=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_khnf_1"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'年份输入错误，不能为空!' where f_java_rule_length(t.khnf)=0 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jgdh_2"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'机构代号输入错误，不能为空!' where f_java_rule_length(t.jgdh)=0 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jgdh_3"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'机构代号不存在!' where not exists(select 1 from khdx_jg j where rtrim(t.jgdh)=rtrim(j.jgdh)) and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jgdh_4"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error= t.error||'机构代号检查不通过,没有权限!' where not exists(select 1 from table(fn_getsjjg_java_qx($sysdate$,$login_khdxdh$,0)) qx where qx.jgdh=t.jgdh) and t.khdxdh = $login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_khzbmc_5"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'考核指标名称输入错误，不能为空!' where f_java_rule_length(t.khzbmc)=0 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz1_6"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.jhz1)&gt;0 and f_java_rule_number(t.jhz1,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz1_7"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，不能为空!' where f_java_rule_length(t.jhz1)=0 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_lzz1_8"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'力争值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.lzz1)&gt;0 and f_java_rule_number(t.lzz1,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz2_9"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.jhz2)&gt;0 and f_java_rule_number(t.jhz2,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz2_10"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，不能为空!' where f_java_rule_length(t.jhz2)=0 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_lzz2_11"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'力争值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.lzz2)&gt;0 and f_java_rule_number(t.lzz2,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz3_12"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.jhz3)&gt;0 and f_java_rule_number(t.jhz3,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz3_13"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，不能为空!' where f_java_rule_length(t.jhz3)=0 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_lzz3_14"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'力争值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.lzz3)&gt;0 and f_java_rule_number(t.lzz3,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz4_15"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.jhz4)&gt;0 and f_java_rule_number(t.jhz4,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz4_16"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，不能为空!' where f_java_rule_length(t.jhz4)=0 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_lzz4_17"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'力争值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.lzz4)&gt;0 and f_java_rule_number(t.lzz4,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz5_18"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.jhz5)&gt;0 and f_java_rule_number(t.jhz5,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz5_19"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，不能为空!' where f_java_rule_length(t.jhz5)=0 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_lzz5_20"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'力争值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.lzz5)&gt;0 and f_java_rule_number(t.lzz5,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz6_21"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.jhz6)&gt;0 and f_java_rule_number(t.jhz6,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz6_22"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，不能为空!' where f_java_rule_length(t.jhz6)=0 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_lzz6_23"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'力争值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.lzz6)&gt;0 and f_java_rule_number(t.lzz6,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz7_24"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.jhz7)&gt;0 and f_java_rule_number(t.jhz7,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz7_25"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，不能为空!' where f_java_rule_length(t.jhz7)=0 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_lzz7_26"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'力争值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.lzz7)&gt;0 and f_java_rule_number(t.lzz7,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz8_27"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.jhz8)&gt;0 and f_java_rule_number(t.jhz8,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz8_28"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，不能为空!' where f_java_rule_length(t.jhz8)=0 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_lzz8_29"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'力争值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.lzz8)&gt;0 and f_java_rule_number(t.lzz8,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz9_30"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.jhz9)&gt;0 and f_java_rule_number(t.jhz9,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz9_31"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，不能为空!' where f_java_rule_length(t.jhz9)=0 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_lzz9_32"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'力争值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.lzz9)&gt;0 and f_java_rule_number(t.lzz9,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz10_33"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.jhz10)&gt;0 and f_java_rule_number(t.jhz10,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz10_34"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，不能为空!' where f_java_rule_length(t.jhz10)=0 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_lzz10_35"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'力争值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.lzz10)&gt;0 and f_java_rule_number(t.lzz10,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz11_36"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.jhz11)&gt;0 and f_java_rule_number(t.jhz11,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz11_37"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，不能为空!' where f_java_rule_length(t.jhz11)=0 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_lzz11_38"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'力争值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.lzz11)&gt;0 and f_java_rule_number(t.lzz11,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz12_39"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.jhz12)&gt;0 and f_java_rule_number(t.jhz12,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_jhz12_40"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'计划值输入错误，不能为空!' where f_java_rule_length(t.jhz12)=0 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_check_lzz12_41"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=t.error||'力争值输入错误，只能输入:21位整数,4位小数!' where f_java_rule_length(t.lzz12)&gt;0 and f_java_rule_number(t.lzz12,21,4)=1 and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_checkupdate_khnf_0"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set error=error||cast(t.khnf as varchar(4))||'年份时间维度未初始化，请通知管理员后，再行导入！' where not exists ( select 1 from csb_sjw sjw where cast(t.khnf||'0101' as integer)=sjw.tjrq) and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_checkupdate_jgmc_0"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set error=error||'机构代号和名称必须一致' where not exists ( select 1 from khdx_jg jg where t.jgdh=jg.jgdh and jg.jgmc=t.jgmc) and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_checkupdate_khzbmc_0"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set error=error||'考核指标名称不存在!' where not exists ( select 1 from khfa_khzb_jg khzb where khzb.khzbmc=t.khzbmc) and t.khdxdh=$login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_exists_target"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set error = error || '数据已存在!' where exists (select 1 from yjzb_jgyjh yjh inner join khdx_jg jg on jg.khdxdh = yjh.khdxdh inner join khfa_khzb_jg khzb on yjh.khzbdh=khzb.khzbdh where khzb.khzbmc=t.khzbmc and t.jgdh = jg.jgdh and yjh.khnf = cast(rtrim(t.khnf) as integer) ) and t.khdxdh = $login_khdxdh$
    </update>  
    <update parameterClass="java.util.Map" id="dn1.jgyjhgldr_exists_same_temp"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update jgyjhgldr_temp t set t.error=error||'存在重复数据!' where exists( select 1 from (select khnf,khzbmc,jgdh from jgyjhgldr_temp dr where khdxdh=$login_khdxdh$ group by khnf,khzbmc,jgdh having count(1)<![CDATA[>]]>1 ) dr where 1=1 and t.khnf=dr.khnf and t.khzbmc=dr.khzbmc and t.jgdh=dr.jgdh) and khdxdh=$login_khdxdh$
    </update>  
    <insert parameterClass="java.util.Map" id="dn1.jgyjhgldr_create_lsb"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> CREATE TABLE jgyjhgldr_temp ( khnf varchar(100) , jgdh varchar(100) , jgmc varchar(100) , khzbmc varchar(100) , jhz1 varchar(100) , lzz1 varchar(100) , jhz2 varchar(100) , lzz2 varchar(100) , jhz3 varchar(100) , lzz3 varchar(100) , jhz4 varchar(100) , lzz4 varchar(100) , jhz5 varchar(100) , lzz5 varchar(100) , jhz6 varchar(100) , lzz6 varchar(100) , jhz7 varchar(100) , lzz7 varchar(100) , jhz8 varchar(100) , lzz8 varchar(100) , jhz9 varchar(100) , lzz9 varchar(100) , jhz10 varchar(100) , lzz10 varchar(100) , jhz11 varchar(100) , lzz11 varchar(100) , jhz12 varchar(100) , lzz12 varchar(100) , khdxdh integer,error varchar(1000) )
    </insert>  
    <delete parameterClass="java.util.Map" id="dn1.jgyjhgldr_delete_lsb"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> delete from jgyjhgldr_temp where khdxdh=$login_khdxdh$
    </delete>  
    <insert parameterClass="java.util.Map" id="dn1.jgyjhgldr_insert_into_lsb"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> insert into JGYJHGLDR_TEMP (khnf,jgdh,jgmc,khzbmc,jhz1,lzz1,jhz2,lzz2,jhz3,lzz3,jhz4,lzz4,jhz5,lzz5,jhz6,lzz6,jhz7,lzz7,jhz8,lzz8,jhz9,lzz9,jhz10,lzz10,jhz11,lzz11,jhz12,lzz12,khdxdh,error) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
    </insert>  
    <select parameterClass="java.util.Map" id="dn1.jgyjhgldr_exists_error_msg" resultClass="java.lang.Integer"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> select count(1) from jgyjhgldr_temp where length(error) <![CDATA[>]]> 0 and khdxdh = $login_khdxdh$
    </select>  
    <select parameterClass="java.util.Map" resultClass="java.lang.Integer" id="dn1.jgyjhgldr_exists_same_data"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> select count(1) from jgyjhgldr_temp where length(error) <![CDATA[>]]> 0 and error != '数据已存在!' and khdxdh = $login_khdxdh$
    </select>  
    <select parameterClass="java.util.Map" resultClass="java.util.HashMap" id="dn1.jgyjhgldr_select_error_msg"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> select '<![CDATA[<]]>img src="$path$/lib/themes/common/images/cancel.jpg" border="0"/<![CDATA[>]]>' as zt, khnf,jgdh,jgmc,khzbmc,jhz1,lzz1,jhz2,lzz2,jhz3,lzz3,jhz4,lzz4,jhz5,lzz5,jhz6,lzz6,jhz7,lzz7,jhz8,lzz8,jhz9,lzz9,jhz10,lzz10,jhz11,lzz11,jhz12,lzz12,khdxdh,error from jgyjhgldr_temp where khdxdh=$login_khdxdh$ and length(error)<![CDATA[>]]>0
    </select>  
    <select parameterClass="java.util.Map" resultClass="java.lang.Integer" remapResults="true" id="dn1.jgyjhgldr_count_all_msg"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> select count(1) from (select '<![CDATA[<]]>img src="$path$/lib/themes/common/images/ok.jpg" border="0"/<![CDATA[>]]>' as zt, khnf,jgdh,jgmc,khzbmc,jhz1,lzz1,jhz2,lzz2,jhz3,lzz3,jhz4,lzz4,jhz5,lzz5,jhz6,lzz6,jhz7,lzz7,jhz8,lzz8,jhz9,lzz9,jhz10,lzz10,jhz11,lzz11,jhz12,lzz12,khdxdh,error from jgyjhgldr_temp where khdxdh=$login_khdxdh$ )a
    </select>  
    <select parameterClass="java.util.Map" resultClass="java.util.HashMap" remapResults="true" id="dn1.jgyjhgldr_select_all_msg"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> select '<![CDATA[<]]>img src="$path$/lib/themes/common/images/ok.jpg" border="0"/<![CDATA[>]]>' as zt, khnf,jgdh,jgmc,khzbmc,jhz1,lzz1,jhz2,lzz2,jhz3,lzz3,jhz4,lzz4,jhz5,lzz5,jhz6,lzz6,jhz7,lzz7,jhz8,lzz8,jhz9,lzz9,jhz10,lzz10,jhz11,lzz11,jhz12,lzz12,khdxdh,error from jgyjhgldr_temp where khdxdh=$login_khdxdh$
    </select>  
    <insert id="dn1.jgyjhgldr_insert_into_target" parameterClass="java.util.Map"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> insert into YJZB_JGYJH(KHNF,KHZBDH,KHDXDH,JHZ1,LZZ1,JHZ2,LZZ2,JHZ3,LZZ3,JHZ4,LZZ4,JHZ5,LZZ5,JHZ6,LZZ6,JHZ7,LZZ7,JHZ8,LZZ8,JHZ9,LZZ9,JHZ10,LZZ10,JHZ11,LZZ11,JHZ12,LZZ12) select cast (t.khnf as INTEGER),khzb.KHZBDH,jg.KHDXDH, (case when f_java_rule_length(t.jhz1)=0 then null else cast (t.jhz1 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.lzz1)=0 then null else cast (t.lzz1 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.jhz2)=0 then null else cast (t.jhz2 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.lzz2)=0 then null else cast (t.lzz2 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.jhz3)=0 then null else cast (t.jhz3 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.lzz3)=0 then null else cast (t.lzz3 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.jhz4)=0 then null else cast (t.jhz4 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.lzz4)=0 then null else cast (t.lzz4 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.jhz5)=0 then null else cast (t.jhz5 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.lzz5)=0 then null else cast (t.lzz5 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.jhz6)=0 then null else cast (t.jhz6 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.lzz6)=0 then null else cast (t.lzz6 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.jhz7)=0 then null else cast (t.jhz7 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.lzz7)=0 then null else cast (t.lzz7 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.jhz8)=0 then null else cast (t.jhz8 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.lzz8)=0 then null else cast (t.lzz8 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.jhz9)=0 then null else cast (t.jhz9 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.lzz9)=0 then null else cast (t.lzz9 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.jhz10)=0 then null else cast (t.jhz10 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.lzz10)=0 then null else cast (t.lzz10 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.jhz11)=0 then null else cast (t.jhz11 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.lzz11)=0 then null else cast (t.lzz11 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.jhz12)=0 then null else cast (t.jhz12 as DECIMAL(19,2)) end), (case when f_java_rule_length(t.lzz12)=0 then null else cast (t.lzz12 as DECIMAL(19,2)) end) from jgyjhgldr_temp t inner join khdx_jg jg on jg.jgdh=t.jgdh inner join khfa_khzb_jg khzb on khzb.khzbmc=t.khzbmc where t.khdxdh=$login_khdxdh$ and (F_JAVA_RULE_LENGTH(t.error)=0 or t.error='数据已存在!')
    </insert>  
    <delete id="dn1.jgyjhgldr_delete_before_override" parameterClass="java.util.Map"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> delete from yjzb_jgyjh yjh where exists( select 1 from jgyjhgldr_temp t inner join khdx_jg jg on jg.jgdh=rtrim(t.jgdh) inner join khfa_khzb_jg khzb on khzb.khzbmc=rtrim(t.khzbmc) where yjh.khnf=cast(rtrim(t.khnf) as integer) and yjh.khzbdh=khzb.khzbdh and yjh.khdxdh=jg.khdxdh and t.khdxdh=$login_khdxdh$ )
    </delete>  
    <select id="dn1.jgyjhgldr_select_template_data" parameterClass="java.util.Map" remapResults="true" resultClass="java.util.LinkedHashMap"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> select $nf$ khnf,jg.jgdh,jg.jgmc,jgzb.khzbmc,cast(coalesce(jh.jhz1,0) as decimal(21,2)) jhz1,cast(jh.lzz1 as decimal(21,2)) lzz1,cast(coalesce(jh.jhz2,0) as decimal(21,2)) jhz2,cast(jh.lzz2 as decimal(21,2)) lzz2,cast(coalesce(jh.jhz3,0) as decimal(21,2)) jhz3,cast(jh.lzz3 as decimal(21,2)) lzz3,cast(coalesce(jh.jhz4,0) as decimal(21,2)) jhz4,cast(jh.lzz4 as decimal(21,2)) llz4, cast(coalesce(jh.jhz5,0) as decimal(21,2)) jhz5,cast(jh.lzz5 as decimal(21,2)) lzz5,cast(coalesce(jh.jhz6,0) as decimal(21,2)) jhz6,cast(jh.lzz6 as decimal(21,2)) lzz6,cast(coalesce(jh.jhz7,0) as decimal(21,2)) jhz7,cast(jh.lzz7 as decimal(21,2)) lzz7,cast(coalesce(jh.jhz8,0) as decimal(21,2)) jhz8,cast(jh.lzz8 as decimal(21,2)) llz8, cast(coalesce(jh.jhz9,0) as decimal(21,2)) jhz9,cast(jh.lzz9 as decimal(21,2)) lzz9,cast(coalesce(jh.jhz10,0) as decimal(21,2)) jhz10,cast(jh.lzz10 as decimal(21,2)) lzz10,cast(coalesce(jh.jhz11,0) as decimal(21,2)) jhz11,cast(jh.lzz11 as decimal(21,2)) lzz11,cast(coalesce(jh.jhz12,0) as decimal(21,2)) jhz12,cast(jh.lzz12 as decimal(21,2)) llz12 from khdx_jg jg inner join khfa_khzb_jg jgzb on 1=1 
      <isNotEmpty property="khzbmc">and jgzb.khzbdh=$khzbmc$</isNotEmpty> left join yjzb_jgyjh jh on 1=1 
      <isNotEmpty property="nf">and jh.khnf=$nf$</isNotEmpty>  
      <isNotEmpty property="khzbmc">and jh.khzbdh=$khzbmc$</isNotEmpty> and jh.KHDXDH=jg.khdxdh where jg.khdxdh in($jgkhdxdh$) order by jg.jgdh
    </select>  
    <select id="dn1.jgyjhgldr_MSQL4SELECT_khzbmc" parameterClass="java.util.Map" resultClass="java.util.HashMap" remapResults="true"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> select khzbdh as key,khzbmc as value from khfa_khzb_jg
    </select> 
  </sqlMap> 
</pageSetting>
