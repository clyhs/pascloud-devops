<?xml version="1.0" encoding="UTF-8"?>

<pageSetting id="khxxcx" title="客户信息查询" type="query" version="1.0.0.0" pid="" desc="标准版"> 
  <conPart> 
    <tags> 
      <tag row="0" col="0" colspan="1" rowspan="1" name="NewJg" label="开户机构"> 
        <attribute key="cascadeCheck" value="true"/>  
        <attribute key="editable" value="true"/>  
        <attribute key="ckbz" value="jg_ckhy"/>  
        <attribute key="isRequired" value="true"/>  
        <attribute key="name" value="jgkhdxdh"/>  
        <attribute key="multiple" value="true"/> 
      </tag>  
      <tag row="0" col="1" colspan="1" rowspan="1" name="Date" label="开户日期"> 
        <attribute key="dateFmt" value="yyyyMMdd"/>  
        <attribute key="defValType" value="yc"/>  
        <attribute key="editable" value="true"/>  
        <attribute key="isRequired" value="true"/>  
        <attribute key="name" value="khrq"/> 
      </tag>  
      <tag row="0" col="2" colspan="1" rowspan="1" name="Date" label="至"> 
        <attribute key="dateFmt" value="yyyyMMdd"/>  
        <attribute key="defValType" value="sysDate"/>  
        <attribute key="editable" value="true"/>  
        <attribute key="isRequired" value="true"/>  
        <attribute key="name" value="tjtq"/> 
      </tag>  
      <tag row="0" col="3" colspan="1" rowspan="1" name="NewMultipleHy" label="行员"> 
        <attribute key="isDisplayXN" value="true"/>  
        <attribute key="editable" value="true"/>  
        <attribute key="isRequired" value="true"/>  
        <attribute key="jgckbz" value="jg_ckhy"/>  
        <attribute key="name" value="khdxdh"/>  
        <attribute key="multiple" value="false"/> 
      </tag>  
      <tag row="1" col="0" colspan="1" rowspan="1" name="MSQL4Select" label="客户类型"> 
        <attribute key="isMultiple" value="false"/>  
        <attribute key="width" value="120px;"/>  
        <attribute key="isSearch" value="false"/>  
        <attribute key="sql" value="select dmz as key, dmms as value from CSB_DMMS where  DMMC= 'KHLX'"/>  
        <attribute key="isRequired" value="false"/>  
        <attribute key="name" value="khlx"/>  
        <attribute key="isAll" value="false"/>  
        <attribute key="isEditable" value="true"/> 
      </tag>  
      <tag row="1" col="1" colspan="1" rowspan="1" name="Text" label="客户号"> 
        <attribute key="editable" value="true"/>  
        <attribute key="name" value="khh"/>  
        <attribute key="readonly" value="false"/> 
      </tag>  
      <tag row="1" col="2" colspan="1" rowspan="1" name="Text" label="客户名称"> 
        <attribute key="editable" value="true"/>  
        <attribute key="name" value="khmc"/>  
        <attribute key="readonly" value="false"/> 
      </tag> 
    </tags> 
  </conPart>  
  <table id="khxxcx_xsjy1jgj" title="新数据源1结果集" page="true"> 
    <col id="KHH" title="客户号" align="left" type="string" width="150" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="KHMC" title="客户名称" align="left" type="string" width="150" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="KHLX" title="客户类型" align="left" type="string" width="120" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="SSHY" title="所属行业" align="left" type="string" width="120" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="ZJLB" title="证件类别" align="left" type="string" width="120" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="ZJHM" title="证件号码" align="left" type="string" width="120" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="KHJG" title="开户机构" align="left" type="string" width="120" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="KHRQ" title="开户日期" align="left" type="string" width="120" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="CSRQ" title="出生日期" align="left" type="string" width="120" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="LXDZ" title="联系地址" align="left" type="string" width="120" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/> 
  </table>  
  <table id="khxxcx_xsjy2jgj" title="新数据源2结果集" page="true"> 
    <col id="KHH" title="客户号" align="left" type="string" width="150" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="KHMC" title="客户名称" align="left" type="string" width="150" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="KHLX" title="客户类型" align="left" type="string" width="120" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="ZJLB" title="证件类别" align="left" type="string" width="120" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="ZJHM" title="证件号码" align="left" type="string" width="120" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="KHJG" title="开户机构" align="left" type="string" width="120" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="KHRQ" title="开户日期" align="left" type="string" width="120" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="LXR" title="联系人" align="left" type="string" width="120" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="LXDZ" title="联系地址" align="left" type="string" width="120" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="KHHYLB" title="客户行业类别" align="left" type="string" width="120" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="KHJJXZ" title="企业性质" align="left" type="string" width="120" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="QYGM" title="企业规模" align="left" type="string" width="120" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/>  
    <col id="ZCZB" title="注册资本" align="right" type="float" width="120" frozen="false" format="" showDymCol="" mergeCells="false" footerCells="false"/> 
  </table>  
  <sqlMap namespace="studio.khxxcx"> 
    <select id="dn0.khxxcxList" parameterClass="java.util.Map" resultClass="java.util.HashMap" remapResults="true"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty>  
      <isEqual property="khlx" compareValue="2">SELECT KH.KHH AS KHH, KH.KHMC AS KHMC, DMMS.DMMS AS KHLX, DMMS1.DMMS AS SSHY, CASE when KH.ZJLB='00' THEN '其他' when KH.ZJLB='01' THEN '身份证' when KH.ZJLB='02' THEN '护照' WHEN KH.ZJLB='03' THEN '军官证' else '' end as zjlb, KH.ZJHM AS ZJHM, jg.jgmc as khjg, KH.KHRQ AS KHRQ, KH.CSRQ AS CSRQ, kh.txdz as lxdz FROM KHDX_KH KH left JOIN CSB_DMMS DMMS ON DMMS.DMMC='KHLX' AND DMMS.DMZ = KH.KHLX left JOIN CSB_DMMS DMMS1 ON DMMS1.DMMC='KHHYLB' AND DMMS1.DMZ = KH.KHHYLB INNER JOIN KHDX_JG JG ON JG.JGDH = KH.JGDH inner join (select khh,khdxdh from lsb_hykhgx group by khh,khdxdh)b on b.khh = kh.khh 
        <isNotEmpty property="jgkhdxdh">WHERE JG.KHDXDH IN ($jgkhdxdh$)</isNotEmpty>  
        <isNotEmpty property="khdxdh">and b.khdxdh = $khdxdh$</isNotEmpty>  
        <isNotEmpty property="khrq">AND KH.KHRQ BETWEEN $khrq$ AND $tjtq$</isNotEmpty>  
        <isNotEmpty property="khh">and kh.khh like '%$khh$%'</isNotEmpty>  
        <isNotEmpty property="khmc">and kh.khmc like '%$khmc$%'</isNotEmpty>  
        <isNotEmpty property="khlx">and kh.khlx = '$khlx$'</isNotEmpty> 
      </isEqual>  
      <isEqual property="khlx" compareValue="1">SELECT KH.KHH AS KHH, KH.KHMC AS KHMC, DMMS.DMMS AS KHLX, CASE when KH.ZJLB='00' THEN '其他' when KH.ZJLB='01' THEN '身份证' when KH.ZJLB='02' THEN '护照' WHEN KH.ZJLB='03' THEN '军官证' else '' end as zjlb, KH.ZJHM AS ZJHM, jg.jgmc as khjg, KH.KHRQ AS KHRQ, KH.LXR AS LXR, KH.TXDZ AS LXDZ, DMMS1.DMMS AS KHHYLB, DMMS2.DMMS AS KHJJXZ, DMMS3.DMMS AS qygm, KH.ZCZB AS ZCZB FROM KHDX_KH KH left JOIN CSB_DMMS DMMS ON DMMS.DMMC='KHLX' AND DMMS.DMZ = KH.KHLX INNER JOIN KHDX_JG JG ON JG.JGDH = KH.JGDH left JOIN CSB_DMMS DMMS1 ON DMMS1.DMMC='KHHYLB' AND DMMS1.DMZ = KH.KHHYLB left JOIN CSB_DMMS DMMS2 ON DMMS2.DMMC='KHJJXZ' AND DMMS2.DMZ = KH.KHJJXZ LEFT JOIN CSB_DMMS DMMS3 ON DMMS3.DMMC='QYGM' AND DMMS3.DMZ = KH.QYGM inner join ( select khh,khdxdh from lsb_hykhgx group by khh,khdxdh)b ON b.khh = kh.khh
        <isNotEmpty property="jgkhdxdh">WHERE JG.KHDXDH IN ($jgkhdxdh$)</isNotEmpty>  
        <isNotEmpty property="khdxdh">and b.khdxdh = $khdxdh$</isNotEmpty>  
        <isNotEmpty property="khrq">AND KH.KHRQ BETWEEN $khrq$ AND $tjtq$</isNotEmpty>  
        <isNotEmpty property="khh">AND KH.KHH LIKE '%$khh$%'</isNotEmpty>  
        <isNotEmpty property="khmc">AND KH.KHMC LIKE '%$khmc$%'</isNotEmpty>  
        <isNotEmpty property="khlx">and kh.khlx = '$khlx$'</isNotEmpty> 
      </isEqual> 
    </select>  
    <select id="dn0.khxxcxCount" parameterClass="java.util.Map" resultClass="java.lang.Integer"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> select count(1) from ( 
      <isEqual property="khlx" compareValue="2">SELECT KH.KHH AS KHH, KH.KHMC AS KHMC, DMMS.DMMS AS KHLX, DMMS1.DMMS AS SSHY, CASE when KH.ZJLB='00' THEN '其他' when KH.ZJLB='01' THEN '身份证' when KH.ZJLB='02' THEN '护照' WHEN KH.ZJLB='03' THEN '军官证' else '' end as zjlb, KH.ZJHM AS ZJHM, jg.jgmc as khjg, KH.KHRQ AS KHRQ, KH.CSRQ AS CSRQ, kh.txdz as lxdz FROM KHDX_KH KH left JOIN CSB_DMMS DMMS ON DMMS.DMMC='KHLX' AND DMMS.DMZ = KH.KHLX left JOIN CSB_DMMS DMMS1 ON DMMS1.DMMC='KHHYLB' AND DMMS1.DMZ = KH.KHHYLB INNER JOIN KHDX_JG JG ON JG.JGDH = KH.JGDH inner join (select khh,khdxdh from lsb_hykhgx group by khh,khdxdh)b on b.khh = kh.khh 
        <isNotEmpty property="jgkhdxdh">WHERE JG.KHDXDH IN ($jgkhdxdh$)</isNotEmpty>  
        <isNotEmpty property="khdxdh">and b.khdxdh = $khdxdh$</isNotEmpty>  
        <isNotEmpty property="khrq">AND KH.KHRQ BETWEEN $khrq$ AND $tjtq$</isNotEmpty>  
        <isNotEmpty property="khh">and kh.khh like '%$khh$%'</isNotEmpty>  
        <isNotEmpty property="khmc">and kh.khmc like '%$khmc$%'</isNotEmpty>  
        <isNotEmpty property="khlx">and kh.khlx = '$khlx$'</isNotEmpty> 
      </isEqual>  
      <isEqual property="khlx" compareValue="1">SELECT KH.KHH AS KHH, KH.KHMC AS KHMC, DMMS.DMMS AS KHLX, CASE when KH.ZJLB='00' THEN '其他' when KH.ZJLB='01' THEN '身份证' when KH.ZJLB='02' THEN '护照' WHEN KH.ZJLB='03' THEN '军官证' else '' end as zjlb, KH.ZJHM AS ZJHM, jg.jgmc as khjg, KH.KHRQ AS KHRQ, KH.LXR AS LXR, KH.TXDZ AS LXDZ, DMMS1.DMMS AS KHHYLB, DMMS2.DMMS AS KHJJXZ, DMMS3.DMMS AS qygm, KH.ZCZB AS ZCZB FROM KHDX_KH KH left JOIN CSB_DMMS DMMS ON DMMS.DMMC='KHLX' AND DMMS.DMZ = KH.KHLX INNER JOIN KHDX_JG JG ON JG.JGDH = KH.JGDH left JOIN CSB_DMMS DMMS1 ON DMMS1.DMMC='KHHYLB' AND DMMS1.DMZ = KH.KHHYLB left JOIN CSB_DMMS DMMS2 ON DMMS2.DMMC='KHJJXZ' AND DMMS2.DMZ = KH.KHJJXZ LEFT JOIN CSB_DMMS DMMS3 ON DMMS3.DMMC='QYGM' AND DMMS3.DMZ = KH.QYGM inner join ( select khh,khdxdh from lsb_hykhgx group by khh,khdxdh)b ON b.khh = kh.khh 
        <isNotEmpty property="jgkhdxdh">WHERE JG.KHDXDH IN ($jgkhdxdh$)</isNotEmpty>  
        <isNotEmpty property="khdxdh">and b.khdxdh = $khdxdh$</isNotEmpty>  
        <isNotEmpty property="khrq">AND KH.KHRQ BETWEEN $khrq$ AND $tjtq$</isNotEmpty>  
        <isNotEmpty property="khh">AND KH.KHH LIKE '%$khh$%'</isNotEmpty>  
        <isNotEmpty property="khmc">AND KH.KHMC LIKE '%$khmc$%'</isNotEmpty>  
        <isNotEmpty property="khlx">and kh.khlx = '$khlx$'</isNotEmpty> 
      </isEqual> ) t
    </select>  
    <select id="dn0.khxxcx_MSQL4SELECT_khlx" parameterClass="java.util.Map" resultClass="java.util.HashMap" remapResults="true">/**!mycat:datanode=$db$**/ select dmz as key, dmms as value from CSB_DMMS where DMMC= 'KHLX'</select> 
  </sqlMap>  
  <rels> 
    <items id="khxxcx_xsjy1jgj"> 
      <item name="khlx" compareValue="2" operate="isEqual"/> 
    </items>  
    <items id="khxxcx_xsjy2jgj"> 
      <item name="khlx" compareValue="1" operate="isEqual"/> 
    </items> 
  </rels>  
  <javascript><![CDATA[jQuery(document).ready(function () {

});

//自定义验证，在提交时执行。通过返回true，否则返回false
function customValidate(){
 return true;
}]]></javascript> 
</pageSetting>
