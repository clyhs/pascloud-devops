<?xml version="1.0" encoding="UTF-8"?>

<pageSetting id="xwdkzhgl" title="小微贷款账户管理" type="manage" version="1.0.0.0" desc="标准版" pid=""> 
  <conPart> 
    <tags> 
      <tag row="0" col="0" rowspan="1" colspan="1" name="Text" label="账号" fieldName=""> 
        <attribute key="name" value="zhdh"/>  
        <attribute key="readonly" value="false"/>  
        <attribute key="editable" value="true"/> 
      </tag> 
    </tags> 
  </conPart>  
  <table page="true" id="xwdkzhgltable"> 
    <col id="ZHDH" title="账号" align="left" type="string" width="150" format="" frozen="false" mergeCells="false" footerCells="false" exp="true" zsy="true" showDymCol="false"/>  
    <col id="ZHHM" title="账户名称" align="left" type="string" width="150" format="" frozen="false" mergeCells="false" footerCells="false" exp="true" zsy="true" showDymCol="false"/>  
    <col id="BZSM" title="备注" align="left" type="string" width="120" format="" frozen="false" mergeCells="false" footerCells="false" exp="true" zsy="true" showDymCol="false"/>  
    <col id="ZHKZSX" title="ZHKZSX" align="left" type="hidden" width="120" format="" frozen="false" mergeCells="false" footerCells="false" exp="false" zsy="false" showDymCol="false"/> 
  </table>  
  <rels> 
    <items id="xwdkzhgltable"/> 
  </rels>  
  <addPage title="编辑页面"> 
    <tag row="0" col="0" rowspan="1" colspan="1" name="Text" label="账号" fieldName="ZHDH"> 
      <attribute key="style" value="width:150px;"/>  
      <attribute key="name" value="zhdh"/>  
      <attribute key="styleClass" value="required"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/> 
    </tag>  
    <tag row="0" col="1" rowspan="1" colspan="1" name="DataInterface" label="null" fieldName=""> 
      <attribute key="dataType" value="select"/>  
      <attribute key="sql" value="select 1 from jxdx_dkzh zh  where 1=1 and zh.zhdh='$zhdh$'"/>  
      <attribute key="name" value="checkzhdh"/> 
    </tag>  
    <tag row="1" col="0" rowspan="1" colspan="1" name="Textarea" label="备注说明" fieldName="BZSM"> 
      <attribute key="cols" value="14"/>  
      <attribute key="style" value="width:150px;"/>  
      <attribute key="name" value="bzsm"/>  
      <attribute key="styleClass" value="{maxlength:199}"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/>  
      <attribute key="rows" value="5"/> 
    </tag>  
    <tag row="2" col="0" rowspan="1" colspan="1" name="Hidden" label="" fieldName="ZHKZSX"> 
      <attribute key="defVal" value="XW"/>  
      <attribute key="name" value="zhkzsx"/> 
    </tag>  
    <tag row="3" col="0" rowspan="1" colspan="1" name="Hidden" label="" fieldName="SXZ"> 
      <attribute key="defVal" value="1"/>  
      <attribute key="name" value="SXZ"/> 
    </tag>  
    <tag row="4" col="0" rowspan="1" colspan="1" name="Hidden" label="" fieldName="CZR"> 
      <attribute key="defVal" value="$login_khdxdh$"/>  
      <attribute key="name" value="CZR"/> 
    </tag>  
    <tag row="5" col="0" rowspan="1" colspan="1" name="Hidden" label="" fieldName="CZSJ"> 
      <attribute key="defVal" value="systime"/>  
      <attribute key="name" value="CZSJ"/> 
    </tag> 
  </addPage>  
  <updatePage title="编辑页面"> 
    <tag row="0" col="0" rowspan="1" colspan="1" name="Text" label="账号" fieldName="ZHDH"> 
      <attribute key="style" value="width:150px;"/>  
      <attribute key="name" value="zhdh"/>  
      <attribute key="styleClass" value="required"/>  
      <attribute key="isAll" value="false"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="isEditable" value="false"/>  
      <attribute key="editable" value="false"/> 
    </tag>  
    <tag row="0" col="1" rowspan="1" colspan="1" name="DataInterface" label="null" fieldName=""> 
      <attribute key="dataType" value="select"/>  
      <attribute key="sql" value="select 1 from jxdx_dkzh zh  where 1=1 and zh.zhdh='$zhdh$'"/>  
      <attribute key="name" value="checkzhdh"/> 
    </tag>  
    <tag row="1" col="0" rowspan="1" colspan="1" name="Textarea" label="备注说明" fieldName="BZSM"> 
      <attribute key="cols" value="14"/>  
      <attribute key="style" value="width:150px;"/>  
      <attribute key="name" value="bzsm"/>  
      <attribute key="styleClass" value="{maxlength:199}"/>  
      <attribute key="readonly" value="false"/>  
      <attribute key="editable" value="true"/>  
      <attribute key="rows" value="5"/> 
    </tag>  
    <tag row="2" col="0" rowspan="1" colspan="1" name="Hidden" label="" fieldName="ZHKZSX"> 
      <attribute key="defVal" value="XW"/>  
      <attribute key="name" value="zhkzsx"/> 
    </tag>  
    <tag row="3" col="0" rowspan="1" colspan="1" name="Hidden" label="" fieldName="SXZ"> 
      <attribute key="defVal" value="1"/>  
      <attribute key="name" value="SXZ"/> 
    </tag>  
    <tag row="4" col="0" rowspan="1" colspan="1" name="Hidden" label="" fieldName="CZR"> 
      <attribute key="defVal" value="$login_khdxdh$"/>  
      <attribute key="name" value="CZR"/> 
    </tag>  
    <tag row="5" col="0" rowspan="1" colspan="1" name="Hidden" label="" fieldName="CZSJ"> 
      <attribute key="defVal" value="systime"/>  
      <attribute key="name" value="CZSJ"/> 
    </tag> 
  </updatePage>  
  <buttons> 
    <button>add</button>  
    <button>edit</button>  
    <button>delete</button>  
    <button>import</button> 
  </buttons>  
  <flow> 
    <insertbefore/>  
    <insertafter/>  
    <deletebefore/>  
    <deleteafter/>  
    <updatebefore/>  
    <updateafter/> 
  </flow>  
  <sqlMap namespace="studio.xwdkzhgl"> 
    <select id="dn0.xwdkzhglList" parameterClass="java.util.Map" resultClass="java.util.HashMap" remapResults="true"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> select sx.zhdh,zh.zhhm,sx.bzsm,sx.zhkzsx from sglr_dkzhkzsx2 sx inner join jxdx_dkzh zh on zh.zhdh=sx.zhdh where sx.zhkzsx='XW' 
      <isNotEmpty property="zhdh">and sx.zhdh like '%$zhdh$%'</isNotEmpty> order by sx.zhdh
    </select>  
    <select id="dn0.xwdkzhglCount" parameterClass="java.util.Map" resultClass="java.lang.Integer"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> select count(1) from ( select sx.zhdh,zh.zhhm,sx.bzsm,sx.zhkzsx from sglr_dkzhkzsx2 sx inner join jxdx_dkzh zh on zh.zhdh=sx.zhdh where sx.zhkzsx='XW' 
      <isNotEmpty property="zhdh">and sx.zhdh like '%$zhdh$%'</isNotEmpty> order by sx.zhdh ) t
    </select>  
    <select id="dn0.xwdkzhgl_select_by_primaryKey" parameterClass="java.util.Map" resultClass="java.util.HashMap" remapResults="true"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> select BZSM, ZHKZSX,F_TIMETOCHAR(CZSJ,'yyyy-mm-dd hh24:mi:ss') as CZSJ, CZR, SXZ, ZHDH from SGLR_DKZHKZSX2 where 1= 1 and ZHKZSX = '$zhkzsx$' and ZHDH = '$zhdh$'
    </select>  
    <select id="dn0.xwdkzhgl_check_insert" parameterClass="java.util.Map" resultClass="java.util.HashMap"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> select BZSM, ZHKZSX,F_TIMETOCHAR(CZSJ,'yyyy-mm-dd hh24:mi:ss') as CZSJ, CZR, SXZ, ZHDH from SGLR_DKZHKZSX2 where 1= 1 and ZHKZSX = '$zhkzsx$' and ZHDH = '$zhdh$'
    </select>  
    <insert id="dn0.xwdkzhgl_insert" parameterClass="java.util.Map"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> insert into SGLR_DKZHKZSX2( CZSJ, CZR, SXZ, ZHDH, ZHKZSX, BZSM ) values ( f_get_timestamp('$CZSJ$'),'$CZR$','$SXZ$','$zhdh$','$zhkzsx$','$bzsm$')
    </insert>  
    <update id="dn0.xwdkzhgl_update" parameterClass="java.util.Map"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> update SGLR_DKZHKZSX2 set BZSM = '$bzsm$' where 1=1 and ZHKZSX = '$zhkzsx$' and ZHDH = '$zhdh$'
    </update>  
    <delete id="dn0.xwdkzhgl_delete" parameterClass="java.util.Map"> 
      <isNotEmpty property="db"><![CDATA[/**!mycat:datanode=$db$**/]]></isNotEmpty> delete from SGLR_DKZHKZSX2 where 1=1 and ZHKZSX = '$zhkzsx$' and ZHDH = '$zhdh$'
    </delete>  
    <select id="dn0.xwdkzhgl_checkzhdh" parameterClass="java.util.Map" resultClass="java.util.HashMap" remapResults="true">/**!mycat:datanode=$db$**/ select 1 from jxdx_dkzh zh where 1=1 and zh.zhdh='$zhdh$'</select> 
  </sqlMap>  
  <javascript> 
    <import>parent.addTab('xwdkzhgldr','小微贷款账户管理','/module/parser/import/visitHtml/xwdkzhgldr');</import>  
    <query>jQuery(document).ready(function () { }); //自定义验证，在提交时执行。通过返回true，否则返回false function customValidate(){ return true; }</query>  
    <edit>jQuery(document).ready(function () { //这里的js脚本，会在页面加载完成后执行 }); //自定义验证，在提交时执行。通过返回true，否则返回false function customValidate(){ return true; }</edit> 
  </javascript> 
</pageSetting>
